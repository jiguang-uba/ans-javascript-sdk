(function () {
  'use strict';

  var _keyStr = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';

  function _utf8Encode(string) {
    string = string.replace(/\r\n/g, '\n');
    var utftext = '';
    for (var n = 0; n < string.length; n++) {
      var c = string.charCodeAt(n);
      if (c < 128) {
        utftext += String.fromCharCode(c);
      } else if (c > 127 && c < 2048) {
        utftext += String.fromCharCode(c >> 6 | 192);
        utftext += String.fromCharCode(c & 63 | 128);
      } else {
        utftext += String.fromCharCode(c >> 12 | 224);
        utftext += String.fromCharCode(c >> 6 & 63 | 128);
        utftext += String.fromCharCode(c & 63 | 128);
      }
    }
    return utftext;
  }

  function _utf8Decode(utftext) {
    var string = '';
    var i = 0;
    var c = 0;
    var c2 = 0;
    var c3 = 0;
    while (i < utftext.length) {
      c = utftext.charCodeAt(i);
      if (c < 128) {
        string += String.fromCharCode(c);
        i++;
      } else if (c > 191 && c < 224) {
        c2 = utftext.charCodeAt(i + 1);
        string += String.fromCharCode((c & 31) << 6 | c2 & 63);
        i += 2;
      } else {
        c2 = utftext.charCodeAt(i + 1);
        c3 = utftext.charCodeAt(i + 2);
        string += String.fromCharCode((c & 15) << 12 | (c2 & 63) << 6 | c3 & 63);
        i += 3;
      }
    }
    return string;
  }

  function Util() {}
  Util.prototype.paramType = function (param) {
    return Object.prototype.toString.call(param).replace('[object ', '').replace(']', '');
  };
  Util.prototype.objHasKay = function (obj, key) {
    return Object.prototype.hasOwnProperty.call(obj, key);
  };
  Util.prototype.ArrayToObj = function (arr) {
    var obj = {};
    for (var i = 0; i < arr.length; i++) {
      obj[arr[i]] = '';
    }
    return obj;
  };
  Util.prototype.keyValueToObje = function (key, value) {
    var obj = {};
    obj[key] = value;
    return obj;
  };
  Util.prototype.toDeep = function (param) {
    var paramNew = null;
    if (this.paramType(param) === 'Array') {
      paramNew = [];
      for (var i = 0; i < param.length; i++) {
        paramNew.push(this.toDeep(param[i]));
      }
    } else if (this.paramType(param) === 'Object') {
      paramNew = {};
      for (var key in param) {
        paramNew[key] = this.toDeep(param[key]);
      }
    } else {
      paramNew = param;
    }
    return paramNew;
  };

  Util.prototype.toDeepObj = function (param1, param2) {
    var obj = {};

    if (this.paramType(param1) === 'String') {
      obj = this.keyValueToObje(param1, param2);
      return obj;
    }

    if (this.paramType(param1) === 'Array') {
      obj = this.ArrayToObj(param1);
      return obj;
    }

    if (this.paramType(param1) === 'Object') {
      for (var key in param1) {
        obj[key] = this.toDeepObj(param1[key]);
      }
    }
    return obj;
  };
  Util.prototype.toDeep = function (param) {
    var paramNew = null;
    if (this.paramType(param) === 'Array') {
      paramNew = [];
      for (var i = 0; i < param.length; i++) {
        paramNew.push(this.toDeep(param[i]));
      }
    } else if (this.paramType(param) === 'Object') {
      paramNew = {};
      for (var key in param) {
        paramNew[key] = this.toDeep(param[key]);
      }
    } else {
      paramNew = param;
    }
    return paramNew;
  };
  Util.prototype.toObj = function (param1, param2) {
    var obj = {};

    if (this.paramType(param1) === 'String') {
      obj = this.keyValueToObje(param1, param2);
      return obj;
    }

    if (this.paramType(param1) === 'Array') {
      obj = this.ArrayToObj(param1);
      return obj;
    }

    if (this.paramType(param1) === 'Object') {
      return param1;
    }
    return obj;
  };
  Util.prototype.objMerge = function (parentObj, part) {
    if (this.paramType(parentObj) !== 'Object' || this.paramType(part) !== 'Object') {
      return parentObj;
    }
    var obj = {};
    for (var key in parentObj) {
      obj[key] = parentObj[key];
    }
    for (var partKey in part) {
      var partValue = part[partKey];
      var objValue = obj[partKey];
      var partValueType = this.paramType(partValue);
      var objValueType = this.paramType(objValue);
      if (objValue && objValueType === 'Object' && partValueType === 'Object') {
        obj[partKey] = this.objMerge(objValue, partValue);
      } else if (objValueType === 'Array' && partValueType === 'Array') {
        obj[partKey] = this.arrayMergeUnique(objValue, partValue);
      } else if (partValueType === 'Function' && objValueType === 'Function') {
        obj[partKey] = this.compose(objValue, partValue);
      } else {
        obj[partKey] = partValue;
      }
    }
    return obj;
  };
  Util.prototype.compose = function () {
    var args = arguments;
    var start = args.length - 1;
    return function () {
      var i = start;
      var result = args[start].apply(this, arguments);
      while (i--) result = args[i].call(this, result);
      return result;
    };
  };
  Util.prototype.fnMerge = function (parentObj, part) {
    return this.objMerge(parentObj, part);
  };
  Util.prototype.arrayUnique = function (arr) {
    var tmpArr = [];
    var hash = {}; // hash为hash表
    for (var i = 0; i < arr.length; i++) {
      if (!hash[arr[i]]) {
        // 如果hash表中没有当前项
        hash[arr[i]] = true; // 存入hash表
        tmpArr.push(arr[i]); // 存入临时数组
      }
    }
    return tmpArr;
  };
  Util.prototype.arrayMerge = function (arr1, arr2) {
    var a1 = [];
    for (var i = 0; i < arr1.length; i++) {
      var a1i = arr1[i];
      if (this.paramType(arr1[i]) === 'Object') {
        a1i = this.toDeep(arr1[i]); //JSON.parse(JSON.stringify(arr1[i]))
      }
      a1.push(a1i);
    }
    for (var y = 0; y < arr2.length; y++) {
      var a2i = arr2[y];
      if (this.paramType(arr2[y]) === 'Object') {
        a2i = this.toDeep(arr2[y]); //JSON.parse(JSON.stringify(arr2[y]))
      }
      a1.push(a2i);
    }
    return a1;
  };
  Util.prototype.arrayMergeUnique = function (arr1, arr2) {
    arr1.push.apply(arr1, arr2);
    return this.arrayUnique(arr1);
  };
  Util.prototype.encode = function (input) {
    var output = '';
    var chr1;
    var chr2;
    var chr3;
    var enc1;
    var enc2;
    var enc3;
    var enc4;
    var i = 0;
    input = _utf8Encode(input);
    while (i < input.length) {
      chr1 = input.charCodeAt(i++);
      chr2 = input.charCodeAt(i++);
      chr3 = input.charCodeAt(i++);
      enc1 = chr1 >> 2;
      enc2 = (chr1 & 3) << 4 | chr2 >> 4;
      enc3 = (chr2 & 15) << 2 | chr3 >> 6;
      enc4 = chr3 & 63;
      if (isNaN(chr2)) {
        enc3 = enc4 = 64;
      } else if (isNaN(chr3)) {
        enc4 = 64;
      }
      output = output + _keyStr.charAt(enc1) + _keyStr.charAt(enc2) + _keyStr.charAt(enc3) + _keyStr.charAt(enc4);
    }
    return output;
  };
  Util.prototype.decode = function (input) {
    var output = '';
    var chr1;
    var chr2;
    var chr3;
    var enc1;
    var enc2;
    var enc3;
    var enc4;
    var i = 0;
    input = input.replace(/[^A-Za-z0-9+/=]/g, '');
    while (i < input.length) {
      enc1 = _keyStr.indexOf(input.charAt(i++));
      enc2 = _keyStr.indexOf(input.charAt(i++));
      enc3 = _keyStr.indexOf(input.charAt(i++));
      enc4 = _keyStr.indexOf(input.charAt(i++));
      chr1 = enc1 << 2 | enc2 >> 4;
      chr2 = (enc2 & 15) << 4 | enc3 >> 2;
      chr3 = (enc3 & 3) << 6 | enc4;
      output = output + String.fromCharCode(chr1);
      if (enc3 !== 64) {
        output = output + String.fromCharCode(chr2);
      }
      if (enc4 !== 64) {
        output = output + String.fromCharCode(chr3);
      }
    }
    output = _utf8Decode(output);
    return output;
  };
  Util.prototype.isEmptyObject = function (obj) {
    for (var name in obj) {
      return false;
    }
    return true;
  };
  Util.prototype.format = function (time, format) {
    var offsetGMT = time.getTimezoneOffset();
    time = new Date(time.getTime() + offsetGMT * 60 * 1000 + 8 * 60 * 60 * 1000); // 转换为东八区时间
    var o = {
      'M+': time.getMonth() + 1, // month
      'd+': time.getDate(), // day
      'h+': time.getHours(), // hour
      'm+': time.getMinutes(), // minute
      's+': time.getSeconds(), // second
      'q+': Math.floor((time.getMonth() + 3) / 3), // quarter
      'S+': time.getMilliseconds() // millisecond
    };
    if (/(y+)/.test(format)) {
      format = format.replace(RegExp.$1, (time.getFullYear() + '').substr(4 - RegExp.$1.length));
    }
    for (var k in o) {
      if (new RegExp('(' + k + ')').test(format)) {
        format = format.replace(RegExp.$1, RegExp.$1.length === 3 ? ('' + o[k]).length < 3 ? ('00' + o[k]).substr(('00' + o[k]).length - 3, ('00' + o[k]).length) : o[k] : ('00' + o[k]).substr(('' + o[k]).length));
      }
    }

    return format.toString();
  };
  Util.prototype.MD5 = function (value, bit) {
    var sMessage = value;

    function RotateLeft(lValue, iShiftBits) {
      return lValue << iShiftBits | lValue >>> 32 - iShiftBits;
    }

    function AddUnsigned(lX, lY) {
      var lX4, lY4, lX8, lY8, lResult;
      lX8 = lX & 0x80000000;
      lY8 = lY & 0x80000000;
      lX4 = lX & 0x40000000;
      lY4 = lY & 0x40000000;
      lResult = (lX & 0x3FFFFFFF) + (lY & 0x3FFFFFFF);
      if (lX4 & lY4) return lResult ^ 0x80000000 ^ lX8 ^ lY8;
      if (lX4 | lY4) {
        if (lResult & 0x40000000) return lResult ^ 0xC0000000 ^ lX8 ^ lY8;else return lResult ^ 0x40000000 ^ lX8 ^ lY8;
      } else return lResult ^ lX8 ^ lY8;
    }

    function F(x, y, z) {
      return x & y | ~x & z;
    }

    function G(x, y, z) {
      return x & z | y & ~z;
    }

    function H(x, y, z) {
      return x ^ y ^ z;
    }

    function I(x, y, z) {
      return y ^ (x | ~z);
    }

    function FF(a, b, c, d, x, s, ac) {
      a = AddUnsigned(a, AddUnsigned(AddUnsigned(F(b, c, d), x), ac));
      return AddUnsigned(RotateLeft(a, s), b);
    }

    function GG(a, b, c, d, x, s, ac) {
      a = AddUnsigned(a, AddUnsigned(AddUnsigned(G(b, c, d), x), ac));
      return AddUnsigned(RotateLeft(a, s), b);
    }

    function HH(a, b, c, d, x, s, ac) {
      a = AddUnsigned(a, AddUnsigned(AddUnsigned(H(b, c, d), x), ac));
      return AddUnsigned(RotateLeft(a, s), b);
    }

    function II(a, b, c, d, x, s, ac) {
      a = AddUnsigned(a, AddUnsigned(AddUnsigned(I(b, c, d), x), ac));
      return AddUnsigned(RotateLeft(a, s), b);
    }

    function ConvertToWordArray(sMessage) {
      var lWordCount;
      var lMessageLength = sMessage.length;
      var lNumberOfWordsTemp1 = lMessageLength + 8;
      var lNumberOfWordsTemp2 = (lNumberOfWordsTemp1 - lNumberOfWordsTemp1 % 64) / 64;
      var lNumberOfWords = (lNumberOfWordsTemp2 + 1) * 16;
      var lWordArray = Array(lNumberOfWords - 1);
      var lBytePosition = 0;
      var lByteCount = 0;
      while (lByteCount < lMessageLength) {
        lWordCount = (lByteCount - lByteCount % 4) / 4;
        lBytePosition = lByteCount % 4 * 8;
        lWordArray[lWordCount] = lWordArray[lWordCount] | sMessage.charCodeAt(lByteCount) << lBytePosition;
        lByteCount++;
      }
      lWordCount = (lByteCount - lByteCount % 4) / 4;
      lBytePosition = lByteCount % 4 * 8;
      lWordArray[lWordCount] = lWordArray[lWordCount] | 0x80 << lBytePosition;
      lWordArray[lNumberOfWords - 2] = lMessageLength << 3;
      lWordArray[lNumberOfWords - 1] = lMessageLength >>> 29;
      return lWordArray;
    }

    function WordToHex(lValue) {
      var WordToHexValue = '';
      var WordToHexValueTemp = '';
      var lByte;
      var lCount;
      for (lCount = 0; lCount <= 3; lCount++) {
        lByte = lValue >>> lCount * 8 & 255;
        WordToHexValueTemp = '0' + lByte.toString(16);
        WordToHexValue = WordToHexValue + WordToHexValueTemp.substr(WordToHexValueTemp.length - 2, 2);
      }
      return WordToHexValue;
    }
    var x = [];
    var k, AA, BB, CC, DD, a, b, c, d;
    var S11 = 7;
    var S12 = 12;
    var S13 = 17;
    var S14 = 22;
    var S21 = 5;
    var S22 = 9;
    var S23 = 14;
    var S24 = 20;
    var S31 = 4;
    var S32 = 11;
    var S33 = 16;
    var S34 = 23;
    var S41 = 6;
    var S42 = 10;
    var S43 = 15;
    var S44 = 21;
    // Steps 1 and 2. Append padding bits and length and convert to words
    x = ConvertToWordArray(sMessage);
    // Step 3. Initialise
    a = 0x67452301;
    b = 0xEFCDAB89;
    c = 0x98BADCFE;
    d = 0x10325476;
    // Step 4. Process the message in 16-word blocks
    for (k = 0; k < x.length; k += 16) {
      AA = a;
      BB = b;
      CC = c;
      DD = d;
      a = FF(a, b, c, d, x[k + 0], S11, 0xD76AA478);
      d = FF(d, a, b, c, x[k + 1], S12, 0xE8C7B756);
      c = FF(c, d, a, b, x[k + 2], S13, 0x242070DB);
      b = FF(b, c, d, a, x[k + 3], S14, 0xC1BDCEEE);
      a = FF(a, b, c, d, x[k + 4], S11, 0xF57C0FAF);
      d = FF(d, a, b, c, x[k + 5], S12, 0x4787C62A);
      c = FF(c, d, a, b, x[k + 6], S13, 0xA8304613);
      b = FF(b, c, d, a, x[k + 7], S14, 0xFD469501);
      a = FF(a, b, c, d, x[k + 8], S11, 0x698098D8);
      d = FF(d, a, b, c, x[k + 9], S12, 0x8B44F7AF);
      c = FF(c, d, a, b, x[k + 10], S13, 0xFFFF5BB1);
      b = FF(b, c, d, a, x[k + 11], S14, 0x895CD7BE);
      a = FF(a, b, c, d, x[k + 12], S11, 0x6B901122);
      d = FF(d, a, b, c, x[k + 13], S12, 0xFD987193);
      c = FF(c, d, a, b, x[k + 14], S13, 0xA679438E);
      b = FF(b, c, d, a, x[k + 15], S14, 0x49B40821);
      a = GG(a, b, c, d, x[k + 1], S21, 0xF61E2562);
      d = GG(d, a, b, c, x[k + 6], S22, 0xC040B340);
      c = GG(c, d, a, b, x[k + 11], S23, 0x265E5A51);
      b = GG(b, c, d, a, x[k + 0], S24, 0xE9B6C7AA);
      a = GG(a, b, c, d, x[k + 5], S21, 0xD62F105D);
      d = GG(d, a, b, c, x[k + 10], S22, 0x2441453);
      c = GG(c, d, a, b, x[k + 15], S23, 0xD8A1E681);
      b = GG(b, c, d, a, x[k + 4], S24, 0xE7D3FBC8);
      a = GG(a, b, c, d, x[k + 9], S21, 0x21E1CDE6);
      d = GG(d, a, b, c, x[k + 14], S22, 0xC33707D6);
      c = GG(c, d, a, b, x[k + 3], S23, 0xF4D50D87);
      b = GG(b, c, d, a, x[k + 8], S24, 0x455A14ED);
      a = GG(a, b, c, d, x[k + 13], S21, 0xA9E3E905);
      d = GG(d, a, b, c, x[k + 2], S22, 0xFCEFA3F8);
      c = GG(c, d, a, b, x[k + 7], S23, 0x676F02D9);
      b = GG(b, c, d, a, x[k + 12], S24, 0x8D2A4C8A);
      a = HH(a, b, c, d, x[k + 5], S31, 0xFFFA3942);
      d = HH(d, a, b, c, x[k + 8], S32, 0x8771F681);
      c = HH(c, d, a, b, x[k + 11], S33, 0x6D9D6122);
      b = HH(b, c, d, a, x[k + 14], S34, 0xFDE5380C);
      a = HH(a, b, c, d, x[k + 1], S31, 0xA4BEEA44);
      d = HH(d, a, b, c, x[k + 4], S32, 0x4BDECFA9);
      c = HH(c, d, a, b, x[k + 7], S33, 0xF6BB4B60);
      b = HH(b, c, d, a, x[k + 10], S34, 0xBEBFBC70);
      a = HH(a, b, c, d, x[k + 13], S31, 0x289B7EC6);
      d = HH(d, a, b, c, x[k + 0], S32, 0xEAA127FA);
      c = HH(c, d, a, b, x[k + 3], S33, 0xD4EF3085);
      b = HH(b, c, d, a, x[k + 6], S34, 0x4881D05);
      a = HH(a, b, c, d, x[k + 9], S31, 0xD9D4D039);
      d = HH(d, a, b, c, x[k + 12], S32, 0xE6DB99E5);
      c = HH(c, d, a, b, x[k + 15], S33, 0x1FA27CF8);
      b = HH(b, c, d, a, x[k + 2], S34, 0xC4AC5665);
      a = II(a, b, c, d, x[k + 0], S41, 0xF4292244);
      d = II(d, a, b, c, x[k + 7], S42, 0x432AFF97);
      c = II(c, d, a, b, x[k + 14], S43, 0xAB9423A7);
      b = II(b, c, d, a, x[k + 5], S44, 0xFC93A039);
      a = II(a, b, c, d, x[k + 12], S41, 0x655B59C3);
      d = II(d, a, b, c, x[k + 3], S42, 0x8F0CCC92);
      c = II(c, d, a, b, x[k + 10], S43, 0xFFEFF47D);
      b = II(b, c, d, a, x[k + 1], S44, 0x85845DD1);
      a = II(a, b, c, d, x[k + 8], S41, 0x6FA87E4F);
      d = II(d, a, b, c, x[k + 15], S42, 0xFE2CE6E0);
      c = II(c, d, a, b, x[k + 6], S43, 0xA3014314);
      b = II(b, c, d, a, x[k + 13], S44, 0x4E0811A1);
      a = II(a, b, c, d, x[k + 4], S41, 0xF7537E82);
      d = II(d, a, b, c, x[k + 11], S42, 0xBD3AF235);
      c = II(c, d, a, b, x[k + 2], S43, 0x2AD7D2BB);
      b = II(b, c, d, a, x[k + 9], S44, 0xEB86D391);
      a = AddUnsigned(a, AA);
      b = AddUnsigned(b, BB);
      c = AddUnsigned(c, CC);
      d = AddUnsigned(d, DD);
    }
    if (bit === 32) {
      return WordToHex(a) + WordToHex(b) + WordToHex(c) + WordToHex(d);
    } else {
      return WordToHex(b) + WordToHex(c);
    }
  };
  Util.prototype.clientTimeZone = function () {
    var munites = new Date().getTimezoneOffset();

    var hour = parseInt(munites / 60);

    var munite = munites % 60;

    var prefix = '-';

    if (hour <= 0 || munite < 0) {
      prefix = '+';

      hour = -hour;

      if (munite < 0) {
        munite = -munite;
      }
    }

    hour = hour + '';

    munite = munite + '';

    if (hour.length === 1) {
      hour = '0' + hour;
    }

    if (munite.length === 1) {
      munite = '0' + munite;
    }

    return prefix + hour + ':' + munite;
  };

  Util.prototype.delEmpty = function (obj) {
    var newObj = {};
    for (var key in obj) {
      var inType = true;
      var valueType = this.paramType(obj[key]);

      if (valueType !== 'Object') {
        if (!obj[key] && (valueType !== 'Number' || isNaN(obj[key])) && valueType !== 'Boolean') {
          inType = false;
        }
        if (inType === true) {
          newObj[key] = obj[key];
        }
      } else {
        newObj[key] = this.delEmpty(obj[key]);
      }
    }
    for (var newObjKey in newObj) {
      var values = [];
      for (var key1 in newObj[newObjKey]) {
        values.push(newObj[newObjKey][key1]);
      }
      if (values.length === 0 && newObj[newObjKey].constructor === Object) {
        delete newObj[newObjKey];
      }
    }
    return newObj;
  };

  Util.prototype.addEvent = function (el, type, fn, useCapture) {
    if (el.addEventListener) {
      if ((this.paramType(el) === 'Array' || this.paramType(el) === 'HTMLCollection') && el.length && el !== window) {
        for (var i = 0; i < el.length; i++) {
          this.addEvent(el[i], type, fn, useCapture);
        }
      } else {
        el.addEventListener(type, fn, useCapture);
      }
    } else {
      if (el.length && el !== window) {
        for (var index = 0; index < el.length; index++) {
          this.addEvent(el[index], type, fn);
        }
      } else {
        el.attachEvent('on' + type, function () {
          return fn.call(el, window.event);
        });
      }
    }
  };

  Util.prototype.removeEvent = function (el, type, fn, useCapture) {
    if (document.removeEventListener) {
      if (el.length) {
        for (var i = 0; i < el.length; i++) {
          this.removeEvent(el[i], type, fn, useCapture);
        }
      } else {
        el.removeEventListener(type, fn, useCapture);
      }
    } else {
      if (el.length) {
        for (var index = 0; index < el.length; index++) {
          this.removeEvent(el[index], type, fn);
        }
      } else {
        el.detachEvent('on' + type, function () {
          return fn.call(el, window.event);
        });
      }
    }
  };

  Util.prototype.addEleLable = function (eleName, className, id, parent) {
    var dom = document;
    var createEle = dom.createElement(eleName);
    var domBody = parent || dom.body || dom.getElementsByTagName('body')[0];
    if (id) {
      createEle.id = id;
    }
    if (className) {
      createEle.className = className;
    }
    domBody.appendChild(createEle);
    return createEle;
  };
  Util.prototype.addScript = function (fileName, urlPath, callback) {
    var dom = document;
    var createScript = dom.createElement('script');
    var domHead = dom.getElementsByTagName('script');
    createScript.type = 'text/javascript';
    createScript.async = true;
    createScript.id = fileName;
    var sdkUrl = '';

    if (!urlPath) {
      if (dom.getElementById('ARK_SDK')) {
        sdkUrl = dom.getElementById('ARK_SDK').src;
      } else {
        for (var i = 0; i < domHead.length; i++) {
          if (domHead[i].src && domHead[i].src.indexOf('AnalysysAgent_JS_SDK') > -1) {
            sdkUrl = domHead[i].src;
            break;
          }
        }
      }
    } else {
      if (this.paramType(urlPath) === 'Array') {
        var commonFn = urlPath[0];
        var path = urlPath[1];
        commonFn([path], callback);
        return;
      }
      sdkUrl = urlPath.charAt(urlPath.length - 1) === '/' ? urlPath : urlPath + '/';
    }

    var sdkPath = sdkUrl.substring(0, sdkUrl.lastIndexOf('/') + 1);
    createScript.src = sdkPath + fileName + '.min.js?v=' + this.format(new Date(), 'yyyyMMddhhmm'); // 方舟B SDK地址
    createScript.onload = setTimeout(callback, 500);
    domHead[0].parentNode.insertBefore(createScript, domHead[0]);
  };

  function CheckChinese(val) {
    var reg = new RegExp('[\\u4E00-\\u9FFF]+', 'g');
    if (reg.test(val)) {
      return true;
    }
    return false;
  }

  Util.prototype.GetUrlParam = function (paraName) {
    var url = document.location.toString();
    var wName = window.name;
    if (this.paramType(wName) === 'String' && wName.indexOf(paraName) > -1) {
      url = wName;
    }
    var arrObj = url.split('?');
    if (arrObj.length > 1) {
      var arrPara = []; // arrObj[1].split("&")
      for (var i = 1; i < arrObj.length; i++) {
        arrPara.push.apply(arrPara, arrObj[i].split('&'));
      }
      var arr;
      for (var index = 0; index < arrPara.length; index++) {
        arr = arrPara[index].split('=');

        if (arr != null && arr[0] === paraName) {
          var value = arr[1];
          if (arr[1].indexOf('#') > -1) {
            value = value.split('#')[0];
          }
          if (value.indexOf('%') > -1) {
            try {
              var utfValue = decodeURI(value);
              if (CheckChinese(utfValue)) {
                return utfValue;
              }
            } catch (e) {}
          }
          return value;
        }
      }
      return '';
    } else {
      return '';
    }
  };

  Util.prototype.stringSlice = function (str, length) {
    return str.slice(0, length);
  };
  Util.prototype.trim = function (str) {
    if (this.paramType(str) === 'String') {
      return str.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, '');
    } else {
      return str;
    }
  };
  Util.prototype.changeHash = function (callback) {
    var historyPushState = window.history.pushState;
    var historyReplaceState = window.history.replaceState;
    window.history.pushState = function () {
      historyPushState.apply(window.history, arguments);
      callback.apply(callback);
    };
    window.history.replaceState = function () {
      historyReplaceState.apply(window.history, arguments);
      callback.apply(callback);
    };
    var state = historyPushState ? 'popstate' : 'hashchange';
    state = !!window.ActiveXObject || 'ActiveXObject' in window ? 'hashchange' : 'popstate';
    if ('on' + state in window) {
      this.addEvent(window, state, function () {
        setTimeout(callback, 0);
      });
    }
  };

  Util.prototype.deviceType = function () {
    var u = navigator.userAgent;

    if (u.indexOf('Tablet') > -1 && u.indexOf('PC') < 0 || u.indexOf('Pad') > -1 || u.indexOf('Nexus 7') > -1) {
      return 'tablet';
    }
    if (u.indexOf('Mobi') > -1 || u.indexOf('iPh') > -1 || u.indexOf('480') > -1) {
      return 'phone';
    }
    return 'desktop';
  };
  Util.prototype.checkTypeList = function (list, ele) {
    var listType = this.paramType(list);
    if (listType === 'String') {
      var url = window.location.href;
      var urlHost = window.location.protocol + '//' + window.location.host;
      var urlPath = urlHost + window.location.pathname;
      var urlIndex = urlPath + 'index.html';
      var urlHash = urlPath + window.location.hash;
      var urlArray = [url, urlHost, urlIndex, urlPath, urlHash];
      if (urlArray.indexOf(list) > -1) {
        return true;
      }
    } else if (listType === 'Function') {
      return list.call(list, ele);
    } else if (listType === 'Array') {
      for (var i = 0; i < list.length; i++) {
        if (this.checkTypeList(list[i], ele) === true) {
          return true;
        }
      }
    }
    return false;
  };
  /**
   * document.querySelectorAll 兼容方法
   * @param {Sting} selectors 选择器 不包含伪类
   * @returns {Array} elements 符合条件的元素列表
   */

  Util.prototype.selectorAllEleList = function (selectors) {
    var eleList = [];
    var eleTagName = selectors.split('.')[0];
    if (this.paramType(document.querySelectorAll) === 'Function' && selectors.indexOf('|') < 0) {
      try {
        return document.querySelectorAll(selectors);
      } catch (e) {}
    }
    var eleId = '';
    if (selectors.indexOf('#') > -1) {
      eleId = selectors.split('.')[0].split('#')[1];
      var ele = document.getElementById(eleId);
      if (ele) {
        eleList.push(ele);
      }
    } else if (selectors.indexOf('.') < 0) {
      return document.getElementsByTagName(eleTagName);
    } else if (selectors.indexOf('[') > -1 && selectors.indexOf(']') > -1) {
      var nodeList = document.getElementsByTagName('*');
      var selector = selectors.replace('[', '').replace(']', '');
      for (var y = 0; y < nodeList.length; y++) {
        var attr = nodeList[y].getAttribute(selector);
        if (this.paramType(attr) === 'String') {
          eleList.push(ele);
        }
      }
    } else {
      var domList = document.getElementsByTagName(eleTagName);
      for (var i = 0; i < domList.length; i++) {
        var dom = domList[i];
        var domClassNameList = this.paramType(dom.className) === 'String' ? dom.className.split(' ') : [];
        if (domClassNameList.length > 0) {
          if ((eleTagName + '.' + domClassNameList.join('.')).indexOf(selectors) > -1) {
            eleList.push(dom);
          }
        }
      }
    }
    // var anchors = [];
    // for (var z = 0; z < eleList.length; z++) {
    //   anchors.push(eleList[z]);
    // }
    // anchors = anchors.sort(function (x, y) {
    //   return offset(x).left - offset(y).left && offset(x).top - offset(y).top
    // })
    // eleList = anchors
    return eleList;
  };
  // /**
  //  * [parserDom description]根据元素及其上层元素获取元素位置及显示/隐藏
  //  * @param  {[type]} ele [description] 元素Dom对象
  //  * @return {[type]} obj [description] 元素对应位置与显示/隐藏
  //  */
  // function offset (curEle) {
  //   var totalLeft = null, totalTop = null, par = curEle.offsetParent;
  //   //首先加自己本身的左偏移和上偏移
  //   totalLeft += curEle.offsetLeft;
  //   totalTop += curEle.offsetTop
  //   //只要没有找到body，我们就把父级参照物的边框和偏移也进行累加
  //   while (par) {
  //     if (navigator.userAgent.indexOf("MSIE 8.0") === -1) {
  //       //累加父级参照物的边框
  //       totalLeft += par.clientLeft;
  //       totalTop += par.clientTop
  //     }

  //     //累加父级参照物本身的偏移
  //     totalLeft += par.offsetLeft;
  //     totalTop += par.offsetTop
  //     par = par.offsetParent;
  //   }

  //   return {
  //     left: totalLeft,
  //     top: totalTop
  //   }
  // }
  Util.prototype.getDomainFromUrl = function (domianStatus, host) {
    if (host === '') {
      return '';
    }
    host = host || window.location.hostname;

    // var regex = /^*\.*/
    // var match = host.match(regex)
    var urlArr = host.split("/");
    if (urlArr.length > 2) {
      host = urlArr[2];
    }
    var ip = /^(\d+)\.(\d+)\.(\d+)\.(\d+)$/;
    if (ip.test(host) === true || host === 'localhost') return '';
    var strAry = host.split('.');
    var level = domianStatus === true ? 2 : strAry.length;
    if (this.paramType(level) !== 'Number' || level < 2) {
      level = 2;
    }
    var urlDomain = [];
    if (strAry.length > 1) {
      if (strAry.length < level) {
        level = strAry.length;
      }
      for (var i = strAry.length - 1; i >= 0; i--) {
        if (urlDomain.length === level) {
          break;
        }
        urlDomain.push(strAry[i]);
      }
      // host = strAry[strAry.length - 2] + "." + strAry[strAry.length - 1];
    } else {
      return '';
    }
    // }
    return urlDomain.reverse().join('.');
  };
  Util.prototype.isiOS = !!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);
  Util.prototype.delNotHybrid = function (obj) {
    delete obj.$is_first_day;
    delete obj.$session_id;
    delete obj.$is_time_calibrated;
    delete obj.$startup_time;
    return obj;
  };

  Util.prototype.getUrlPath = function () {
    var hash = window.location.hash;
    if (hash.indexOf('?') > -1) {
      hash = hash.split('?')[0];
    }

    return window.location.host + window.location.pathname + hash;
  };

  Util.prototype.detectZoom = function () {
    var metaEles = this.selectorAllEleList('meta');
    var ratio = 1;
    for (var i = 0; i < metaEles.length; i++) {
      var attr = metaEles[i].getAttribute('content');
      if (attr && attr.indexOf('initial-scale=') > -1) {
        var attrList = attr.split(',');
        for (var y = 0; y < attrList.length; y++) {
          if (attrList[y].indexOf('initial-scale') > -1) {
            ratio = parseFloat(attrList[y].split('=')[1]);
          }
        }
      }
    }
    return ratio;
  };
  var Util$1 = new Util();

  function getElementContent(ele, status) {
    var eleContent = '';
    if (ele.tagName.toLowerCase() === 'input') {
      eleContent = ele.value || '';
    } else if (ele.tagName.toLowerCase() === 'img') {
      eleContent = ele.getAttribute('alt') || ele.getAttribute('title') || '';
    } else if (ele.tagName.toLowerCase() === 'a') {
      eleContent = ele.getAttribute('title') || '';
    }
    if (!eleContent) {
      var children = ele.childNodes;
      for (var i = 0; i < children.length; i++) {
        if (children[i].nodeType === 3) {
          eleContent += children[i].nodeValue;
        }
      }
      // if (ele.textContent) {
      //   eleContent = Util.trim(ele.textContent)
      // } else {
      //   if (ele.innerText) {
      //     eleContent = Util.trim(ele.innerText)
      //   }
      // }
    }
    if (eleContent && Util$1.paramType(eleContent) === 'String') {
      eleContent = eleContent.replace(/[\r\n]/g, ' ').replace(/[ ]+/g, ' ');
    } else {
      eleContent = '';
    }
    if (ele.tagName.toLowerCase() === 'input' && ele.type !== 'button' && ele.type !== 'submit' && status !== true) {
      return '';
    }
    eleContent = Util$1.trim(eleContent);
    // if (eleContent.length > 0) {
    //   eleContent = 
    // }
    return eleContent;
  }

  var detect = Util$1.detectZoom();

  // var rootNodeRE = /^(?:body|html)$/i
  function getPath(ele) {
    var tagName = ele.tagName.toLowerCase();
    var classPath = '';
    var classNameList = Util$1.paramType(ele.className) !== 'String' ? [] : ele.className.split(' ');
    for (var i = 0; i < classNameList.length; i++) {
      if (classNameList[i] && classNameList[i].indexOf('ARK') < 0) {
        classPath += '.' + classNameList[i];
      }
    }
    return {
      className: classPath,
      id: ele.id || '',
      tagName: tagName
    };
  }
  function domParentList(ele, status) {
    var list = [];
    var newPath = [];
    var parent = ele;
    while (parent != null) {
      var eleNodeType = parent.nodeType;
      if (eleNodeType !== 1) {
        parent = parent.parentNode;
        continue;
      }
      var elePath = getPath(parent);
      var pathIndex = null;
      if (status !== true) {
        pathIndex = getEleIndex(parent);
      }

      // if (!status) {
      list.push(elePath.tagName + (elePath.id ? '#' + elePath.id : '') + elePath.className);
      // } else {
      var path = {
        // className: elePath.className || '',
        id: elePath.id,
        tagName: elePath.tagName
      };
      if (elePath.row !== null) {
        path['row'] = pathIndex.row;
      } else {
        path['index'] = pathIndex.index;
      }
      newPath.push(Util$1.delEmpty(path));
      // }

      parent = parent.parentNode;
    }
    return {
      path: list.join('<'),
      newPath: newPath
    };
  }

  function getEleIndex(ele) {
    var parent = ele.parentNode;
    var index = 0;
    var parnetStatus = true;
    var row = null;
    while (parent !== null && parnetStatus === true) {
      var eleNodeType = parent.nodeType;
      if (eleNodeType !== 1) {
        parent = parent.parentNode;
        continue;
      }
      var childEles = parent.children;
      var childElesPath = [];
      var elePath = {};
      for (var i = 0; i < childEles.length; i++) {
        var childElePath = getPath(childEles[i]);
        childElesPath.push(childElePath);
        if (ele === childEles[i]) {
          elePath = childElePath;
          index = i;
        }
      }
      var isRow = false;
      for (var y = 0; y < childEles.length; y++) {
        // if (newPathContrast({ newPath: childElesPath[y] }, elePath) === true) {
        if (childElesPath[y].tagName === elePath.tagName) {
          isRow = true;
        }
      }
      if (isRow === true) {
        row = index;
      }
      parnetStatus = false;
    }
    return {
      row: row,
      index: index
    };
  }
  function parentContrast(clickPathList, eventPathList) {
    for (var i = 0; i < clickPathList.length; i++) {
      if (clickPathList[i].split('.')[0] !== eventPathList[i].split('.')[0]) {
        return false;
      }
    }
    return true;
  }
  function delPathRow(pathList) {
    var copyPathList = Util$1.arrayMerge([], pathList);
    for (var i = 0; i < copyPathList.length; i++) {
      delete copyPathList[i].row;
    }
    return copyPathList;
  }
  /**
   * 拥有new_path时，点击元素是否符合可视化元素列表中的元素
   *
   * @param {*} clickEleObj 点击元素
   * @param {*} eventEleObj 可视化元素
   * @returns {Boolean} 是否符合
   */
  function newPathContrast(clickObj, eventNewPath, isNotDeep) {
    var clickNewPath = clickObj.newPath;
    var clickNewPathList = Util$1.arrayMerge([], clickNewPath);
    var eventNewPathList = Util$1.arrayMerge([], eventNewPath);
    var newPath = Util$1.arrayMerge([], clickNewPath);
    var ele = clickObj.ele;

    if (clickNewPathList === eventNewPathList) {
      return true;
    }
    if (clickNewPathList.length < eventNewPathList.length) {
      return false;
    }
    if (clickObj.ele && clickNewPathList.length > eventNewPathList.length) {
      if (isNotDeep === true) {
        return false;
      }
      var num = clickNewPathList.length - eventNewPathList.length;
      clickNewPathList.splice(0, num);
      for (var i = 0; i < num; i++) {
        ele = ele.parentNode || document.body;
      }

      newPath = Util$1.arrayMerge([], clickNewPathList);
    }
    var status = true;
    var startNum = 0;
    while (startNum < eventNewPathList.length) {
      var eventPath = eventNewPathList[startNum];
      var clickPath = clickNewPathList[startNum];

      if (Util$1.objHasKay(clickPath, 'row') === true && Util$1.objHasKay(eventPath, 'row') === false && Util$1.objHasKay(clickPath, 'index') === false) {
        delete clickPath.row;
      }
      if (eventPath.id && eventPath.id !== clickPath.id || eventPath.tagName !== clickPath.tagName || clickPath.index !== eventPath.index || clickPath.row !== eventPath.row) {
        status = false;
        break;
      }
      startNum++;
    }
    if (status === true) {
      clickObj.newPath = newPath;
      clickObj.ele = ele;
    }
    return status;
  }
  function isClassContrast(clickEle, eventClass) {
    var clickClass = clickEle ? clickEle.className : null;
    if (Util$1.paramType(clickClass) === 'String' && Util$1.paramType(eventClass) === 'String') {
      clickClass = Util$1.trim(clickClass) || null;
      eventClass = Util$1.trim(eventClass) || null;
      if (clickClass && eventClass && clickClass.indexOf(eventClass) > -1) {
        return true;
      }
    }
    return false;
  }
  function bindingContrast(ele, bindings) {
    for (var i = 0; i < bindings.length; i++) {
      var binding = bindings[i];
      if (binding.prop_name === 'text') {
        var eleText = getElementContent(ele);
        if (eleText !== binding.value) {
          return false;
        }
      } else if (binding.prop_name === 'class') {
        if (!isClassContrast(ele, binding.value)) {
          return false;
        }
      }
    }
    return true;
  }
  /**
   * 点击元素是否符合可视化元素列表中的元素
   * @param {JSON} clickEleObj 点击元素
   * @param {JSON} eventEleObj 可视化元素
   * @returns {Boolean} 是否符合
   */
  function pathContrast(clickEleObj, eventEleObj, isNotDeep) {
    var status = true;
    var isNewPath = false;
    eventEleObj.bindings = eventEleObj.bindings || eventEleObj.props_binding;

    if (clickEleObj.newPath && eventEleObj.newPath) {
      isNewPath = true;
      status = newPathContrast(clickEleObj, eventEleObj.newPath, isNotDeep);
    }
    if (status === true && eventEleObj.bindings && eventEleObj.bindings.length > 0) {
      isNewPath = true;
      status = bindingContrast(clickEleObj.ele, eventEleObj.bindings);
    }
    if (isNewPath) {
      return status;
    }
    var clickPath = clickEleObj.path || clickEleObj.link;
    var eventPath = eventEleObj.path || eventEleObj.link;
    var clickIndex = clickEleObj.index || 0;
    var eventIndex = eventEleObj.index || 0;
    var clickEle = clickEleObj.ele || null;
    var isText = eventEleObj.isText || '';
    if (isText !== '') {
      var eleText = getElementContent(clickEle);
      if (isText !== eleText) {
        return false;
      }
    }
    if (clickPath === eventPath && clickIndex === eventIndex) {
      return true;
    }
    var clickPathArray = clickPath.split('<');
    var eventPathArray = eventPath.split('<');

    if (clickPathArray.length < eventPathArray.length) {
      return false;
    }

    if (clickPathArray.length > eventPathArray.length) {
      var lengthNum = clickPathArray.length - eventPathArray.length;
      clickPathArray = clickPathArray.splice(lengthNum);
      // 点击的为子节点则不校验点击元素位置
      // clickIndex = eventIndex
      var parentEle = clickEle;
      while (lengthNum > 0 && parentEle) {
        parentEle = parentEle.parentNode;
        lengthNum--;
      }
      if (!parentEle) {
        return false;
      }
      clickIndex = setIndex(parentEle, clickPathArray.join('<'));
    }
    if (parentContrast(clickPathArray, eventPathArray) && clickIndex === eventIndex) {
      return true;
    }

    return false;
  }
  /**
   * 通过new_path 查找元素
   * @param {JSON} path
   * @returns {Element} ele 解析到的元素
   */

  function parseNewPath(path, step, parentTarger) {
    var stepPaths = null;

    if (!parentTarger) {
      parentTarger = document;
      stepPaths = path;
    } else {
      if (step === 0) {
        if (path.length === 1) {
          return parentTarger;
        } else {
          stepPaths = path.slice(0, path.length - step);
          parentTarger = parentTarger.parentNode;
        }
      } else {
        stepPaths = path.slice(0, path.length - 1);
        while (step > 0) {
          parentTarger = parentTarger.parentNode;
          if (!parentTarger) {
            return null;
          }
          step--;
        }
      }
    }
    var childNode = parentTarger;
    var stepPathLen = stepPaths.length - 1;

    while (stepPathLen >= 0) {
      var stepPath = stepPaths[stepPathLen];
      var tagName = stepPath.tagName;

      var index = Util$1.paramType(stepPath.row) === 'Number' ? stepPath.row : stepPath.index;
      var id = stepPath.id || '';
      if (tagName === 'html') {
        index = 0;
      }
      if (Util$1.paramType(index) !== 'Number') {
        return null;
      }
      var childrenList = childNode.children;
      if (childrenList.length < index) {
        return null;
      }
      childNode = childrenList[index];
      if (!childNode || id && childNode.id !== id || Util$1.paramType(childNode.tagName) === 'String' && tagName !== childNode.tagName.toLowerCase()) {
        return null;
      }
      stepPathLen--;
    }
    return childNode;
  }
  /**
   * 通过Path查找元素
   *
   * @param {String} path 元素Path
   * @returns
   */
  function parseEvent(path) {
    var eleObj = parserDom(path);
    if (eleObj.length === 0) {
      return;
    }
    var baseEle = eleObj[0];
    if (baseEle.elePath.indexOf('#') > -1) {
      baseEle.elePath = '#' + baseEle.elePath.split('#')[1];
    }
    var eleList = Util$1.selectorAllEleList(baseEle.elePath);
    // var anchors = [];
    // for (var y = 0; y < eleList.length; y++) {
    //   anchors.push(eleList[y]);
    // }
    // anchors = anchors.sort(function (x, y) {
    //   return eleOffset(x).left - eleOffset(y).left && eleOffset(x).top - eleOffset(y).top
    // })
    // eleList = anchors
    var allEleList = [];
    for (var i = 0; i < eleList.length; i++) {
      var pathObj = domParentList(eleList[i], 'noIndex');
      if (pathContrast({
        path: pathObj.path
      }, {
        path: path
      }) === true) {
        allEleList.push(eleList[i]);
      }
    }
    return allEleList;
  }
  /**
   * [parserDom description]
   * @param  {[type]} path [description]
   * @return {[type]}      [description]
   */
  function parserDom(path) {
    var eleList = [];
    if (path.indexOf('<') < 0) {
      return [{
        elePath: path
      }];
    }
    var pathObj = path.split('<');
    for (var i = 0; i < pathObj.length; i++) {
      var elelPath = pathObj[i];
      eleList.push({
        elePath: elelPath
      });
    }
    return eleList;
  }

  /**
   * [offsetParent description] 获取父元素
   * @return {[type]} [description]
   */
  // function eleOffsetParent (elem) {
  //   var parent
  //   while (elem && !elem.offsetParent) {
  //     elem = elem.parentNode
  //     if (elem === document.body) {
  //       break
  //     }
  //   }
  //   if (!elem) return document.body
  //   parent = elem.offsetParent || document.body
  //   while (parent && !rootNodeRE.test(parent.nodeName) && eleCss(parent, 'position') === 'static') {
  //     parent = parent.offsetParent
  //   }
  //   return parent
  // }
  function elePCOffset(ele) {
    var boxPosition = ele.getBoundingClientRect();
    // var realTop = 0
    // var realLeft = 0
    // var elemHidden = false
    // // var isFixed = false

    // while (ele != null) {
    //   realTop += ele.offsetTop
    //   realLeft += ele.offsetLeft

    //   // if (!elemHidden) {
    //   //   elemHidden = !!(eleCss(ele, 'display') === 'none' || eleCss(ele, 'width') === '0px' || eleCss(ele, 'height') === '0px')
    //   // }

    //   // if (eleCss(ele, 'position') === 'fixed') {
    //   //   isFixed = true
    //   // }
    //   ele = ele.offsetParent
    // }
    // if (isFixed === true) {
    //   realTop += document.documentElement.scrollTop || document.body.scrollTop
    //   realLeft += document.documentElement.scrollLeft || document.body.scrollLeft
    // }
    return {
      top: boxPosition.top,
      left: boxPosition.left,
      hidden: false

    };
  }
  /**
   * [elementPostion description] 返回标签元素坐标及是否隐藏
   * @param  {[type]} elem [description]标签元素
   * @return {[type]}     [description]x-横坐标 number y-纵坐标 number hidden-是否隐藏隐藏 Bloon
   */
  function elementPostion(elem) {
    // var t
    var position = {
      top: 0,
      left: 0,
      hidden: true
      // var elemHidden = false

    };if (!elem) {
      return position;
    }
    var elePosition = elePCOffset(elem);
    position = {
      top: elePosition.top,
      left: elePosition.left,
      hidden: elePosition.hidden
    };

    if (!position) {
      return {
        top: 0,
        left: 0,
        hidden: true
      };
    }
    return position;
  }

  /**
   * [isElmentReady description] 页面dom是否渲染成功
   * 仅判断dom列表是否渲染完毕，不保证img加载完毕
   * img加载完触发window.resize进行兼容
   * @return {Boolean} [description]
   */
  var openTime = +new Date();
  function isElmentReady() {
    if (!document.documentElement || document.documentElement.scrollWidth === 0 || document.readyState !== 'complete') {
      if (+new Date() - openTime > 5000) {
        return true;
      }
      return false;
    } else {
      return true;
    }
  }

  /**
   * [isParent description] 判断是当前元素否为指定元素的子元素
   * @param  {[type]}  ele       [description] 当前元素
   * @param  {[type]}  parentEle [description] 指定元素
   * @return {Boolean}           [description]
   */
  function isParent(ele, parentEle) {
    // 任何元素都为BODY的子元素
    while (ele && ['BODY', 'HTML'].indexOf(ele.tagName.toUpperCase()) < 0) {
      if (Util$1.paramType(parentEle) === 'Array') {
        for (var i = 0; i < parentEle.length; i++) {
          if (ele === parentEle[i]) {
            return true;
          }
        }
      } else {
        if (ele === parentEle) {
          return true;
        }
      }
      ele = ele.parentNode;
    }
    return false;
  }

  function setIndex(ele, link) {

    // var link = domParentList(ele)
    var eleObj = parserDom(link);
    if (eleObj.length === 0) {
      return 0;
    }
    var baseEle = eleObj[0];
    if (baseEle.elePath.indexOf('#') > -1) {
      baseEle.elePath = '#' + baseEle.elePath.split('#')[1];
    }
    var eleList = Util$1.selectorAllEleList(baseEle.elePath); // document.
    var index = 0;
    for (var i = 0; i < eleList.length; i++) {
      var pathObj = domParentList(eleList[i]);
      if (pathContrast({
        path: pathObj.path
      }, {
        path: link
      }) === true) {
        if (eleList[i] === ele) {
          return index;
        }
        index++;
      }
    }
    return 0;
  }

  function boxPosition(ele, blo) {
    var boxW = 435;
    var boxH = 482;
    var num = 4;

    if (blo === 'debug') {
      boxW = 260;
      boxH = 270;
      num = 4;
    }
    var postion = elementPostion(ele);
    var top = postion.top;
    var left = postion.left;
    var width = ele.offsetWidth;
    var height = ele.offsetHeight;
    var bodyW = document.body.offsetWidth;
    var bodyH = document.body.offsetHeight;
    var boxLeft = left;
    var boxTop = top - boxH - num;
    if (boxLeft + boxW > bodyW) {
      boxLeft = left - boxW + width;
      if (boxLeft < 0) {
        boxLeft = num;
      }
    }
    if (boxTop + boxH + num > bodyH) {
      boxTop = top - boxH - num;
    }
    if (boxTop < 0) {
      boxTop = top + height + num;
    }
    return {
      top: boxTop,
      left: boxLeft
    };
  }
  function backH5PathProPath(clickPath, related) {

    // var clickPathCopy = Util.arrayMerge([], clickPath)
    var relatedPathCopy = Util$1.arrayMerge([], related.h5_path);
    // var step = related.step
    // if (step !== 0) {
    //   clickPathCopy.splice(0, step)
    // }
    // relatedPathCopy.splice(relatedPathCopy.length - 1, 1)
    // for (var i = 0; i < clickPathCopy.length; i++) {
    //   relatedPathCopy.push(clickPathCopy[i])
    // }
    // var proPath = Util.arrayMerge(relatedPathCopy, clickPathCopy)
    return relatedPathCopy;
  }
  /**
   * 根据查找元素
   * @param {Map} pageEvents 埋点列表
   * @param {Map} ele 元素列表
   * @returns {Map} eleList 命中元素
   */
  function parserPageEvents(pageEvents, ele) {
    var eleList = [];
    var parentEle = ele || document.body;
    var childEles = parentEle.childNodes;
    for (var i = 0; i < childEles.length; i++) {
      var childEle = childEles[i];
      var eleClassName = Util$1.paramType(childEle.className) === 'String' ? childEle.className : '';
      if (childEle.nodeType === 1 && eleClassName.indexOf('ARK_') < 0) {
        var pathObj = domParentList(childEle);
        var clickEleObj = {
          newPath: pathObj.newPath,
          ele: childEle,
          path: pathObj.path
        };
        for (var y = 0; y < pageEvents.length; y++) {
          var eventEleObj = pageEvents[y];
          if (checkNewPathBase(clickEleObj.newPath, eventEleObj.newPath) == true && pathContrast(clickEleObj, eventEleObj, true) === true) {
            eleList.push({
              config: eventEleObj,
              ele: childEle,
              newPath: pathObj.newPath
            });
            pageEvents[y]['inPage'] = true;
          }
        }
        var eles = childEle.childNodes || [];
        if (eles.length > 0) {
          var childEleList = parserPageEvents(pageEvents, childEle);
          if (childEleList.length > 0) {
            eleList = Util$1.arrayMerge(eleList, childEleList);
          }
        }
      }

      // }
    }
    return eleList;
  }
  function backEasyPath(pathList) {
    var path = [];
    for (var i = 0; i < pathList.length; i++) {
      path.push(pathList[i].tagName);
    }
    return path.join('>');
  }
  function checkNewPathBase(clickPathList, eventPathList) {
    if (!eventPathList) {
      if (clickPathList) {
        return true;
      }
      return false;
    }
    var clickCopy = JSON.parse(JSON.stringify(clickPathList)); //Util.arrayMerge([], clickPathList)
    var eventCopy = JSON.parse(JSON.stringify(eventPathList)); //Util.arrayMerge([], eventPathList)
    clickCopy.reverse();
    eventCopy.reverse();
    var clickPath = backEasyPath(clickCopy);
    var eventPath = backEasyPath(eventCopy);
    if (clickPath.indexOf(eventPath) > -1) {
      return true;
    }
    return false;
  }

  var visualConfig = window.AnalysysAgent.config;

  /**
   * [sendMsg description]发送热图SDK初始化完毕信息
   * @return {[type]} [description]
   */
  function sendMsg(msg) {
    console.log('发送可视化SDK初始化完毕消息===>', JSON.stringify(msg, null, 2));

    if (Util$1.paramType(msg) === 'Object') {
      msg = JSON.stringify(msg);
    }
    window.parent.postMessage(msg, '*');
  }

  /**
   * [getMsg description]接收iframe消息
   * @param  {Function} callback [description]
   * @return {[type]}            [description]
   */
  function getMsg(callback) {
    Util$1.addEvent(window, 'message', function (msgObj) {
      var msg = msgObj.data;
      try {
        if (Util$1.paramType(msg) === 'String') {
          msg = JSON.parse(msg);
        }
      } catch (e) {}
      console.log('获取可视化消息===>', JSON.stringify(msg, null, 2));
      callback(msg);
    });
  }

  function styleInject(css, ref) {
    if ( ref === void 0 ) ref = {};
    var insertAt = ref.insertAt;

    if (!css || typeof document === 'undefined') { return; }

    var head = document.head || document.getElementsByTagName('head')[0];
    var style = document.createElement('style');
    style.type = 'text/css';

    if (insertAt === 'top') {
      if (head.firstChild) {
        head.insertBefore(style, head.firstChild);
      } else {
        head.appendChild(style);
      }
    } else {
      head.appendChild(style);
    }

    if (style.styleSheet) {
      style.styleSheet.cssText = css;
    } else {
      style.appendChild(document.createTextNode(css));
    }
  }

  var css_248z = ".ARK_BOX {\n  position: fixed;\n  width: 390px;\n  height: 100%;\n  background-color: #ffffff;\n  border-radius: 4px;\n  z-index: 10000000000 !important;\n  background: #ffffff;\n  color: #000000;\n  box-shadow: 0px 6px 18px 0px rgba(0, 0, 0, 0.15);\n  -webkit-box-shadow: 0px 6px 18px 0px rgba(0, 0, 0, 0.15);\n  -moz-box-shadow: 0px 6px 18px 0px rgba(0, 0, 0, 0.15);\n  padding: 20px 17px;\n  font-size: 16px;\n  top: 0;\n  right: 0;\n  font-family: PingFangSC-Medium; }\n\n.ARK_BOX input[disabled] {\n  cursor: not-allowed; }\n\n.ARK_BOX .ARK_TITLE {\n  width: 72px;\n  font-size: 18px;\n  font-weight: normal;\n  font-stretch: normal;\n  line-height: 18px;\n  letter-spacing: 0px;\n  color: #333333;\n  font-family: inherit; }\n\n.ARK_BOX .fl {\n  float: left; }\n\n.ARK_BOX .pb-20 {\n  padding-bottom: 20px; }\n\n.ARK_BOX .textR {\n  text-align: right; }\n\n.ARK_BOX button {\n  border: 0; }\n\n.ARK_BOX button:focus, .ARK_BOX button:active {\n  border: 0;\n  outline: 0; }\n\n.ARK_BOX .ARK_TITLE.MID {\n  font-size: 14px;\n  line-height: 14px;\n  color: #252d39;\n  font-weight: 500;\n  line-height: 1.1;\n  color: inherit; }\n\n.ARK_BOX .ARK_TITLE.SM {\n  font-size: 13px;\n  line-height: 33px;\n  color: #4c6072;\n  width: 56px;\n  display: inline-block;\n  text-align: right; }\n\n.ARK_BOX_HEADER {\n  font-size: 16px;\n  text-align: left;\n  color: #333333;\n  cursor: move;\n  z-index: 1;\n  position: absolute;\n  top: 0;\n  width: 100%;\n  padding: 20px 17px 29px 17px;\n  left: 0;\n  background-color: #ffffff; }\n\n.ARK_CONTENT {\n  height: 100%;\n  position: relative;\n  /* top: 170px; */\n  width: 100%;\n  left: 0;\n  /* padding: 0 17px; */\n  padding-top: 165px; }\n\n.ARK_EVENT {\n  position: absolute;\n  top: 70px;\n  width: 100%;\n  background-color: #ffffff;\n  left: 0;\n  padding: 0 17px 10px 17px;\n  z-index: 1; }\n\n.ARK_BOX_PAGE {\n  position: relative;\n  color: #666666;\n  font-size: 12px; }\n\n.ARK_BOX_EVENT_ID .v-radio-wrapper, .ARK_BOX_PAGE .v-radio-wrapper {\n  font-size: 14px;\n  line-height: 30px;\n  color: #252d39;\n  font-weight: 400;\n  font-stretch: normal;\n  cursor: pointer;\n  font-size: 14px;\n  display: inline-block;\n  margin-right: 16px; }\n\n.ARK_BOX_EVENT_ID label, .ARK_BOX_PAGE label {\n  font-size: 12px;\n  bottom: 0;\n  margin: 0;\n  max-width: 100%; }\n\n.ARK_BOX_EVENT_ID .v-radio-wrapper span, .ARK_BOX_PAGE .v-radio-wrapper span {\n  font-size: 12px;\n  color: #999;\n  font-weight: 400;\n  font-stretch: normal; }\n\n.ARK_BOX_EVENT_ID .v-radio-wrapper span.wbText, .ARK_BOX_PAGE .v-radio-wrapper span.wbText {\n  font-size: 14px;\n  color: #333;\n  font-weight: 400; }\n\n.ARK_BOX_EVENT_ID .v-radio-ARK, .ARK_BOX_PAGE .v-radio-ARK {\n  vertical-align: middle;\n  white-space: nowrap;\n  cursor: pointer;\n  outline: 0;\n  line-height: 1;\n  position: relative;\n  display: inline-block;\n  margin-right: 8px; }\n\n.ARK_BOX_EVENT_ID .boxRadio, .ARK_BOX_PAGE .boxRadio {\n  width: 270px;\n  display: inline-grid; }\n\n.ARK_BOX_PAGE .ml-24 {\n  margin-left: 24px; }\n\n.ARK_BOX_PAGE.mb-15 {\n  margin-bottom: 15px; }\n\n.ARK_BOX_PAGE.mb-16 {\n  margin-bottom: 16px; }\n\n.ARK_BOX_EVENT_ID.mb-40 {\n  margin-bottom: 40px; }\n\n.ARK_BOX .ml-12 {\n  margin-left: 12px; }\n\n.ARK_BOX .mr-12 {\n  margin-right: 12px; }\n\n.ARK_BOX .mr-25 {\n  margin-right: 25px; }\n\n.ARK_BOX .ml-8 {\n  margin-left: 8px; }\n\n.ARK_BOX .fr {\n  float: right; }\n\n.ARK_BOX_EVENT_ID .v-radio-checked .v-radio-inner, .ARK_BOX_PAGE .v-radio-checked .v-radio-inner {\n  border-color: #0098e1;\n  background-color: #0098e1; }\n\n.ARK_BOX_EVENT_ID .v-radio-wrapper-disabled .v-radio-checked .v-radio-inner, .ARK_BOX_PAGE .v-radio-wrapper-disabled .v-radio-checked .v-radio-inner {\n  border-color: #ddd;\n  background-color: #ddd; }\n\n.ARK_BOX_EVENT_ID .v-radio-checked .v-radio-inner {\n  background-color: #fff;\n  border-radius: 7px; }\n\n.ARK_BOX_EVENT_ID .v-radio-checked .v-radio-inner:after {\n  background-color: #0098e1; }\n\n.ARK_BOX_EVENT_ID .v-radio-inner:after, .ARK_BOX_PAGE .v-radio-inner:after {\n  opacity: 1;\n  -webkit-transform: scale(1);\n  transform: scale(1);\n  -webkit-transition: all .2s ease-in-out;\n  transition: all .2s ease-in-out;\n  transition: all .2s ease-in-out; }\n\n.ARK_BOX_PAGE .v-radio-inner {\n  width: 14px;\n  height: 14px;\n  top: 0;\n  left: 0;\n  border: 1px solid #d7dde4;\n  border-radius: 2px;\n  background-color: #fff;\n  transition: #d7dde4 .2s ease-in-out, #fff .2s ease-in-out;\n  position: relative;\n  display: inline-block; }\n\n.ARK_BOX_EVENT_ID .v-radio-inner {\n  width: 14px;\n  height: 14px;\n  top: 0;\n  left: 0;\n  border: 1px solid #d7dde4;\n  border-radius: 7px;\n  background-color: #fff;\n  transition: #d7dde4 .2s ease-in-out, #fff .2s ease-in-out;\n  position: relative;\n  display: inline-block; }\n\n.ARK_BOX_PAGE .v-radio-checked .v-radio-inner:after {\n  transform: rotate(45deg) scale(0.8); }\n\n.ARK_BOX_EVENT_ID .v-radio-wrapper.v-radio-wrapper-disabled, .ARK_BOX_PAGE .v-radio-wrapper.v-radio-wrapper-disabled {\n  color: #ddd; }\n\n.ARK_BOX_EVENT_ID .v-radio-wrapper.v-radio-wrapper-disabled .wbText, .ARK_BOX_PAGE .v-radio-wrapper.v-radio-wrapper-disabled .wbText {\n  color: #ddd; }\n\n.ARK_BOX_EVENT_ID .v-radio-wrapper-disabled, .ARK_BOX_PAGE .v-radio-wrapper-disabled {\n  cursor: not-allowed;\n  color: #ddd; }\n\n.ARK_BOX_PAGE .v-radio-inner:after {\n  content: \"\";\n  display: inline-block;\n  width: 4px;\n  height: 8px;\n  position: absolute;\n  top: 1px;\n  left: 4px;\n  border: 2px solid #fff;\n  border-top: 0;\n  border-left: 0;\n  -ms-transform: rotate(45deg) scale(0);\n  transform: rotate(45deg) scale(0);\n  transition: all .2s ease-in-out; }\n\n.ARK_BOX_EVENT_ID .v-radio-inner:after {\n  content: \"\";\n  width: 8px;\n  height: 8px;\n  border-radius: 4px;\n  top: 2px;\n  left: 2px;\n  transition: all .2s ease-in-out;\n  display: inline-block;\n  position: absolute;\n  transition: all .2s ease-in-out; }\n\n.ARK_BOX_EVENT_ID input[type=checkbox],\n.ARK_BOX_EVENT_ID input[type=radio],\n.ARK_BOX_PAGE input[type=checkbox],\n.ARK_BOX_PAGE input[type=radio] {\n  margin: 4px 0 0;\n  margin-top: 1px;\n  line-height: normal;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  padding: 0; }\n\n.ARK_BOX_EVENT_ID .v-radio-input, .ARK_BOX_PAGE .v-radio-input {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 1;\n  cursor: pointer;\n  opacity: 0; }\n\n.ARK_BOX_CENTER {\n  line-height: 16px;\n  font-size: 16px; }\n\n.ARK_BOX_SMALL {\n  font-size: 12px;\n  line-height: 30px;\n  color: #999999; }\n\n.ARK_BOX_SMALL span {\n  color: #0097e0; }\n\n.ARK_BOX_EVENT_ID {\n  position: relative;\n  margin-bottom: 6px; }\n\n.ARK_BOX .ARK_title {\n  /* width: 70px; */\n  /* height: 36px; */\n  text-align: right;\n  /* display: inline-block; */\n  font-size: 14px;\n  line-height: 36px;\n  margin-right: 9px;\n  color: #666666; }\n\n.ARK_BOX ul, .ARK_BOX li {\n  list-style: none; }\n\n.ARK_BOX .PROLIST {\n  margin: 0;\n  padding: 0;\n  margin-top: 10px;\n  max-height: 360px;\n  border: 1px solid transparent; }\n\n.ARK_BOX_EVENT_ID input, .ARK_BOX_PAGE input, .ARK_BOX_EVENT_ID select {\n  width: 274px;\n  height: 30px;\n  background-color: transparent;\n  border-radius: 0px;\n  border: 0;\n  border-bottom: 1px solid #d2d2d2;\n  color: #333333;\n  font-size: 14px;\n  line-height: 30px;\n  outline: 0 none !important;\n  margin-left: 16px; }\n\n.ARK_BOX_EVENT_ID input.error {\n  border-color: #e00000; }\n\n.ARK_BOX_EVENT_ID input.PROID {\n  width: 246px;\n  margin-left: 12px;\n  background-color: #f4f9fd; }\n\n.ARK_BOX_EVENT_ID input.PROVALUE {\n  width: 188px;\n  margin-left: 12px;\n  background-color: #f4f9fd; }\n\n.ARK_BOX_EVENT_ID input.PROVALUE.width246 {\n  width: 246px; }\n\n.ARK_BOX_EVENT_ID input.PROREX {\n  width: 216px;\n  margin-left: 12px;\n  background-color: #f4f9fd; }\n\n.ARK_BOX .PROTYPE, .ARK_BOX .PAGETYPE {\n  width: 246px;\n  margin-left: 12px;\n  background-color: #f4f9fd;\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAAAXNSR0IArs4c6QAAAIxJREFUCB1jzG9dJv6f6Zf/pMqEWQxYQF77vBQmDtatTAyMfxT+//vXn9c6vwldXV77/FqG/4yT/n//L8c0sSruJDMTg+9/hv/FyIpBiv7/+1/BxPjfB6SGEWZKQfs8p7//GDYzMjD2MjAx/AYpAhkwoTJpH0gNXCGIA1MMYiMrAvExQG7bInsQRpcAAB00POpoifV7AAAAAElFTkSuQmCC) no-repeat scroll right center transparent;\n  cursor: pointer; }\n\n.ARK_BOX input::-webkit-input-placeholder {\n  font-size: 14px;\n  color: #bbbec4; }\n\n.ARK_BOX input:-ms-input-placeholder {\n  font-size: 14px;\n  color: #bbbec4; }\n\n.ARK_BOX input::placeholder {\n  font-size: 14px;\n  color: #bbbec4; }\n\n.ARK_BOX input:focus, .ARK_BOX input:hover {\n  border-color: #57a3f3; }\n\n.ARK_BOX input::-webkit-input-placeholder {\n  font-size: 14px;\n  color: #bbbec4; }\n\n.ARK_BOX input:-ms-input-placeholder {\n  font-size: 14px;\n  color: #bbbec4; }\n\n.ARK_BOX input::placeholder {\n  font-size: 14px;\n  color: #bbbec4; }\n\n.ARK_BOX input:focus, .ARK_BOX input:hover {\n  border-color: #57a3f3; }\n\n.ARK_BOX_EVENT_ID_ERROR {\n  display: none;\n  position: absolute;\n  bottom: -19px;\n  left: 79px;\n  font-weight: 700;\n  font-size: 12px;\n  color: red; }\n\n.ARK_BOX_ChOICE {\n  width: 199px;\n  height: 95px;\n  float: left;\n  position: relative;\n  border-bottom: 1px solid #f1f1f1; }\n\n.ARK_BOX_ChOICE .ARK_BOX_LIKENUM {\n  font-size: 12px;\n  color: #0098e1;\n  line-height: 30px;\n  width: 100%; }\n\n.ARK_BOX_ChOICE span {\n  float: left;\n  margin-left: 18px; }\n\n.ARK_BOX_ChOICE input {\n  opacity: 0;\n  position: absolute;\n  right: 10px;\n  top: 0;\n  width: 20px;\n  height: 20px;\n  margin: 0;\n  padding: 0; }\n\n.ARK_BOX_ChOICE input + label {\n  position: absolute;\n  cursor: pointer;\n  right: 10px;\n  top: 0;\n  width: 20px;\n  height: 20px;\n  font-size: 18px;\n  line-height: 18px;\n  text-align: center;\n  color: #999999; }\n\n.ARK_BOX_ChOICE input + label:after {\n  content: '+';\n  position: absolute;\n  right: 10px;\n  top: 0;\n  width: 20px;\n  height: 20px;\n  border: 1px dashed #d4d4d4; }\n\n.ARK_BOX_ChOICE input + label:before {\n  content: '';\n  position: absolute;\n  right: 10px;\n  top: 0;\n  width: 20px;\n  height: 20px;\n  border: 1px dashed #d4d4d4; }\n\n.ARK_BOX_ChOICE input:checked + label:after {\n  content: '+';\n  color: #0098e1;\n  border: 1px dashed #0098e1; }\n\n.ARK_BOX_ChOICE input:checked + label:before {\n  content: '+';\n  color: #0098e1;\n  border: 1px dashed #0098e1; }\n\n.ARK_BOX_SAVE {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  border-top: 1px solid #e5eef4;\n  height: 60px;\n  padding-top: 13px;\n  /* padding: 15px; */\n  background-color: #ffffff;\n  padding-left: 245px; }\n\n#ARK_BOX_SAVE {\n  -moz-user-select: none;\n  -ms-touch-action: manipulation;\n  -ms-user-select: none;\n  -o-transition: color .2s linear, background-color .2s linear, border .2s linear;\n  -webkit-transition: color .2s linear, background-color .2s linear, border .2s linear;\n  -webkit-user-select: none;\n  cursor: pointer;\n  display: inline-block;\n  font-size: 12px;\n  font-weight: 400;\n  line-height: 1.5;\n  margin-bottom: 0;\n  padding: 6px 15px;\n  text-align: center;\n  touch-action: manipulation;\n  transition: color .2s linear, background-color .2s linear, border .2s linear;\n  user-select: none;\n  vertical-align: middle;\n  white-space: nowrap;\n  width: 60px;\n  height: 32px;\n  border-radius: 15px;\n  cursor: pointer;\n  color: #ffffff;\n  border: 0;\n  background-color: #0098e1;\n  outline: 0 none !important; }\n\n#ARK_BOX_SAVE:active {\n  background-color: #0086c7;\n  border-color: #0086c7;\n  color: #f2f2f2; }\n\n#ARK_BOX_SAVE:hover,\n#ARK_BOX_SAVE:focus {\n  background-color: #47c3ff;\n  border-color: #47c3ff;\n  color: #fff; }\n\n#ARK_BOX_CANCEL {\n  /* margin-top: 15px; */\n  width: 60px;\n  height: 32px;\n  /* float: right; */\n  font-size: 14px;\n  line-height: 30px;\n  border: 0;\n  background-color: #ffffff;\n  color: #999999;\n  cursor: pointer;\n  outline: 0 none !important; }\n\n#ARK_BOX_CANCEL:focus,\n#ARK_BOX_SAVE:focus {\n  border: 0; }\n\n.ARK_EVENT_LIST {\n  border: 0;\n  border: 1px solid #eeeeee;\n  border-radius: 5px;\n  background: #ffffff;\n  color: #000000;\n  -webkit-box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;\n  -moz-box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;\n  min-width: 80px;\n  min-height: 13px;\n  position: absolute;\n  top: 20px;\n  left: 500px;\n  padding: 0;\n  max-width: 250px;\n  z-index: 100000; }\n\n.ARK_EVENT_LIST a.ARK_EVENT {\n  max-width: 110px;\n  height: 24px;\n  line-height: 24px;\n  color: #0098e1;\n  margin: 5px;\n  text-align: center;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: block;\n  text-decoration: underline !important;\n  cursor: pointer; }\n\n.ARK_SHOW {\n  display: block !important;\n  visibility: visible !important; }\n\n.debugLog {\n  top: 0;\n  left: 0;\n  position: absolute;\n  width: 260px;\n  min-height: 270px;\n  padding: 20px;\n  z-index: 999999999; }\n\n.debugLog .l-list {\n  position: relative;\n  overflow: hidden; }\n\n.debugLog .l-list div {\n  color: #ffffff;\n  font-size: 13px;\n  line-height: 24px;\n  word-break: break-word; }\n\n.debugLog .bg {\n  width: 100%;\n  height: 100%;\n  background-color: rgba(47, 50, 58, 0.8);\n  box-shadow: 0px 6px 18px 0px rgba(0, 0, 0, 0.12);\n  border-radius: 4px;\n  position: absolute;\n  top: 0;\n  left: 0; }\n\n.debugLog .cha {\n  position: absolute;\n  right: 20px;\n  color: rgba(255, 255, 255, 0.5);\n  top: 20px;\n  cursor: pointer;\n  font-size: 14px;\n  width: 10px;\n  height: 10px;\n  cursor: pointer; }\n\n.ARK_HOVER, .ARK_CLICK {\n  outline: 1px solid #e00000 !important;\n  outline-offset: -1px !important;\n  /*position: absolute;*/\n  /*background-color: red !important*/ }\n\n.ARK_SHOW_DISPOSE {\n  position: absolute !important;\n  z-index: 999999999 !important;\n  background-color: rgba(20, 137, 226, 0.2);\n  border: dashed 3px #1489e2 !important; }\n\n.ARK_SHOW_DISPOSE.ARK_NO_LIGHT {\n  display: none !important; }\n\n.ARK_SHOW_DISPOSE:hover, .ARK_SHOW_DISPOSE.ARK_NO_LIGHT:hover {\n  background-color: rgba(20, 137, 226, 0); }\n\n.ARK_SAVE_DISPOSE {\n  position: absolute !important;\n  z-index: 999999999 !important;\n  background-color: rgba(20, 137, 226, 0.2);\n  border: solid 3px #1489e2; }\n\n.ARK_SAVE_CLICK {\n  position: absolute !important;\n  z-index: 999999999 !important;\n  background-color: transparent;\n  border: solid 3px #1489e2; }\n\n.ARK_IS_EDIT {\n  position: absolute !important;\n  bottom: -21px !important;\n  left: -3px !important;\n  background-color: #1489e2 !important;\n  font-size: 12px !important;\n  line-height: 12px !important;\n  color: #ffffff !important;\n  padding: 3px 5px !important;\n  white-space: nowrap;\n  margin: 0 !important;\n  display: block !important; }\n\n.ARK_SAVE_DISPOSE.ARK_NO_LIGHT {\n  display: none !important; }\n\n.ARK_SAVE_DISPOSE:hover, .ARK_SAVE_DISPOSE.ARK_NO_LIGHT:hover {\n  background-color: rgba(20, 137, 226, 0); }\n\n.ARK_SAVE_PRO {\n  position: absolute !important;\n  z-index: 999999999 !important;\n  background-color: rgba(255, 163, 0, 0.1);\n  border: solid 2px #ffa300; }\n\n.ARK_SAVE_PRO.ARK_NO_LIGHT {\n  display: none !important; }\n\n.ARK_NONE {\n  display: none; }\n\n.ARK_CLICK_ELE {\n  position: absolute !important;\n  /* width : 2px;\n    height : 2px; */\n  z-index: 999999999 !important;\n  display: none;\n  /* background-color: rgba(0, 0, 0, 0.3); */\n  /* background-color: rgba(20, 137, 226, 0.2); */\n  border: solid 3px #1489e2;\n  /* transform:none */ }\n\n.ARK_PRO_ELE {\n  position: absolute !important;\n  /* width : 2px;\n    height : 2px; */\n  z-index: 999999999 !important;\n  display: none;\n  /* background-color: rgba(0, 0, 0, 0.3); */\n  /* background-color: rgba(20, 137, 226, 0.2); */\n  border: solid 3px #ffa300;\n  /* transform:none */ }\n\n.ARK_ADD_PRO {\n  width: 100%;\n  height: 40px;\n  background-color: #f4f9fd;\n  border: 0;\n  border-radius: 4px;\n  margin-bottom: 20px;\n  margin-top: 10px;\n  color: #1489e2; }\n\n.ARK_ADD_PRO img {\n  margin-right: 9px;\n  margin-bottom: 3px;\n  width: 11px;\n  height: 11px;\n  vertical-align: middle;\n  position: relative;\n  display: unset;\n  font-family: inherit;\n  font-size: inherit;\n  line-height: inherit; }\n\n.ARK_PRO_ITEM {\n  background-color: #f4f9fd;\n  border: 0;\n  border-radius: 4px;\n  margin-top: 10px;\n  padding: 20px 16px;\n  display: inline-block;\n  position: relative; }\n\n.ARK_ICON {\n  width: 24px;\n  height: 24px;\n  display: block;\n  margin-left: 4px;\n  margin-top: 6px; }\n\n.ARK_ICON.ICON_XQ {\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAelJREFUSA3VVs0rRFEUP+d6UdQg7PwBFmwsZGspbHxtNGJDFjNRU2bykZJBioyiLGawZC//gKyQj8X4LLKRkiym8N49zp28STPPu9M0s3Dqde89H7/fOfed++7Do5OrVkLYJKJayKMg4hMSDBkKXAAMNzfW7ecRHw5Pr9sAaRMOT+KUT+DfWAqbky+sFJzAyCb/wNJO2eeXNQ8E3YTEZeNuZVX1xMxwR0IXnxXB55cZJYJ2ELCBAEJKGHl9falmcK+OQLtFvvBuDYP3AooAEHr4KWaSIBH2ja7EKnQE2goM/Cg3uc+EkPfSgnXVciiwFSRv1ofh4eWbG4m2gpWQ95YBHhCKUr6CGRDwZjXY/+gGrmzaCpQTCtGFUpaqeVIkvRtFRo+9dBtTWbk5RUIDxyaUxW2fElF6uRz0ntlrtzErgnSAhEwE/HM79el6p3VOBEByktA694eje2MLsQYnYFuXG4GK5j7l9u02JZz5wluzNmD66PqSxxa3m6RlDUgQF4CJOz7JmcJEiNTJhqlMo6aLTClbGHQEQHLGTuE/OsK7v6yuW7QWGlzklp/+KzilF6TOiqO4EqiISGhwVkfChy53ghQJinGeZ3w9+Ug/Cyg+UH6O8v9vNHX7Jy9ox/pyVyrM5J9FoX9bvgFfDa+ln7mJKwAAAABJRU5ErkJggg==) no-repeat; }\n\n.ARK_ICON.ICON_XQ:hover {\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAd1JREFUSA3dljlLA1EQgGde4i2aIiESVPwB2tpbilYabUSwUqwEjQd4NCkkRhQsFFL4A7QX/4SFRyF4gEnwiuAFKnH3jbOrayRu9oWYNAaS3fdm5vvevF2yi77lRCfpEAOgRijqB5PogmG3AUeEkdRU804x+d5osot0ioE3Eqdign+yDLb4OVGK85IL3Pms2h+9rpH0vghEQUIgJNgq87hnL0cCL6r6vARSpjcBsJtQbAiQgi/aaPpR9zJ8UCVQblHD2pWPgf2IGBJEdQRYDogzDB5oWb33qATKDnRNqzchQp5LHdaBbSzr5O3CtHit49iDk0TZQWq86ZSJF7zyTK4wHHhyORaIO8GNmLIDEyBcvSChGkAzhyjFE7iozxwofjKrcki8CwX2XJV4bKXU1lcd3U407ltjp2NegmzA8+NLyB+Nt2bP240LEhDJOZ3wwBdJbPtXEm12YGuuIIFZzHcRAQV1DfZ9S8mwBcw+Ol7khpVEu6bRkABxKN/oLLv4W4TUw+fzdnFHgf4OHVw0KvkWAvNrhzDn7OUcctyi1HRThDMWcmK/Agw5zZXjKDCK7iabw0oJ/UFgSQTiNAL++vdEgBssr9jN1cG/eKJh0nhA52yxwMAnk98sSv3a8gEW3qVw8YWlQQAAAABJRU5ErkJggg==) no-repeat; }\n\n.ARK_ICON.ICON_XQ.active {\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAd5JREFUSA21VksvA1EYPbcvfUTr0SKUKIkm3SBIhA0bicR/YCFYCz9CIuwtLST+gKTCko2FV1dEE1rxiFIh02o7ve6dZph4zL2k/ZLJfczcc8733TMzlwSWE+NUxRpAgyhrkCSxYob4lxKJ+SFfsLvJUVb4o9scVvefkxauvNzgXGmPJpgGGUFlo+IENhn96WwRGycviN3n4XEQjLa7MN7lBpFYLCRQi8DKfhpPmSLGOl14UFRsxl5RpMBE2C2kEJboPJXDZbqA2X4v4k95BH12jIRc2IlnhOD8ASGBUijhUEJxzKwXPVcQqrUhU2CpSYSQIFxvg83KzExLFWeV0Wof8dsl4CUy8DgsmOv3gbAM9Ai4rZjs9epD01aYAV890FIFu+XTM5EGB2qcUkvFe/BVHq/91pnCXKV+vfXjWE6GYWk2TzWbLmynsH78ikcB0Z8JdK4CS2D3QsFiNIW9q6w+/a01fdEOb3I4vctptlTp5yYbUbhbj27fMNzmNE5/9E0JDq6zpup0lICH+fiXMC3RdJ8Xg60/KzPiNf6XgDuTfyJEJP8m4Cp1ktEOl9Y3Kuf9Zq8Vobrf32rTPdDBOMlUT7V26XOyrekeyIKYPccISJL/oMsdJUx2sqj0seUdh92PWTODHHwAAAAASUVORK5CYII=) no-repeat; }\n\n.ARK_ICON.ICON_REX {\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAphJREFUSA3VVk1oE0EUnrfZxpRqCoVajCKJMbWIpa2mklLQm9CKF1HwIIgitAdPoicFo1i8K168CSIIgvTi1VOTCpIfQkvW0qQk0Vil21Rl02ySfb4Rp7i7LkpJDg7svnlv3vu+N29mZxbiCWUCgT1BxH2sRQ0Y0xjArLRTmoZYUilKjE1FRg69bhE+S6c/dWlG5REi09lcIoutAv4dZz6T66PkVyn59rTI4IFVKvvuthGItNtOIAsmq6TpSVTDtwyYF5DVaDzm9njuhg/7y3PJ7DPSR3kMH5M75NPHBw8WuW5tjgQrKytucg7v6PN2Ges1b72m39Rrmy/JNg4Ix8Al3ZABFxrNDmP0iL9kBRa6I4FwCPt8GvW1bPZLVK2qlXw+7ymv64y2YGl0qD8n/JzkP60BL9d6VT3LkOUCgcAmB6PA3kS24Hu3vNztBM7tf50B38ux1Pvv9HXmJNl1QYAZRvNpVdN0YLBItglht0obAZVi15qmRsnxFgAYBPAQGZ53e+Vz4WBwYwtAck2OD4eSQp9LKjOdnZ2Pjw7s/yhsXNpKpOrqXmA4LZzGRvpniOSN/rU+y+sv7DaJeLFeqwatdhsBZU3VMLex4dB1hlAoV/TnfD1+jmLzZDy9dGY+tXTK7G3WbARi2O/36/QN3Oc6cSLN5AqVajGTKXTT6fuCrCfQMC7zJ7ZQ7BFxVmlbA8qQDj8+DzDI+Y4IIL1B/du/9KiwC0mHpuiapI2gx93zYa2pSvGkchVcrq1FNEVZFDQaQTTYHmRS3jJk36YDA73f4inlkoF4jzWajlM3A8EGSHAtMhQqme2ktes+4EQc23GRbZls0/D/EvArk3beZ4lepfmkMrnNCvwxjF/62NAf0JH7Ctr92/ID4uMOd90r/84AAAAASUVORK5CYII=) no-repeat; }\n\n.ARK_ICON.ICON_REX:hover {\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAApdJREFUSA3VVk1oE1EQnnmbxNTSVEq3wSQFsQcvXsR6VbwUWtGDKHgQbEVIDyK2te1BwSgWSSoiahE9aAURBEF68aonwZO3gpco2STabq2GNml+d5wHfSW72yCU5ODCMv/fvJl5+96ifs8YpBo8A6AINOlBwAIiLAT8u0exO24YLETNqd73TcKH4OzPdsuqPiK0ytAdT1GzgOtxeh4sBfWEsSTqlc3kl68Gl4iop2UJ1GJbnsCjMjlpjEg8njU+I2GAbSVC+gTetlsrY/qP7oTxCgmObMaUvB5xIjsRNpwYUm5Ywfw8+ICg37tHOwS4a0AQ5LFcfLsJclgIcU34fIOaz3MqMx5KbwcudQ0rUAHZaKjAfOFA3Iz9guKffS/Iv26mwRKQNseCSemHY8rbTRtWUO8q27WqlU4jQPL7CBalDWuo98bN0P6nq531vk7+nxXIvTyXMNYJIQma55wCIKi+3IBauZiDRdYNKr2TuhJwKzp+w0aMHa/zOi1AfMizOBvobD+TjHbltgA0bWhlIvxFyXoiNeOntjljWs8qnaSuFq1plTABjionczIyw+fUh7VcfkH2X+mdlAjPF7HS59S7EpAG3Gr7szzVO84tSuXN9Gs5D2kli44FZzMnexLZAbu3XXIlUObhYSgLhDtSRkQ62B+5CESLz5/kOnnLvkGioxZZI8Rv5L7RpeKc1DUDrHHH+byNIfcf4KYK+Hgcq8zf2JRjSq8on8qKtVFXgo6aN7OKVcFf6yUQ2tYQbVEOAcnq40r2+vzWN4fJ/aF9ndbX9ETmAgfdBqvWsHQ7EPHuEpczVyJpu56lVt0HMpHEbjhk10p2qPh/E8grk7f3MleAaT5vhnbYgW3D5KVPpcpdAnqHrf5t+QvWh/ZinlE//gAAAABJRU5ErkJggg==) no-repeat; }\n\n.ARK_ICON.ICON_REX.active {\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAoVJREFUSA3VVj1oFEEUfm9m9/aye3eJcgkELxLsTGklqI2doqJga2UTRIyVYqUoFsEfLAQxomBnJ7axsbGzsbMxSi6/Rwioud292533nDEZk+zeiYZc4YPlzcz73vvem7czuzh4v36CFUwBcA12SRAwRIQ3laI/jtXJet136N5wH7zfpfjQUk5xKeJrKdCiMJnvZnCTpCfTuOqrx7qSc5qgNxIIWGXmoZ4R2LR7TuBYpqxmgfj1B7wExkCXmkiBHweK/Kxf8sqXprgDDGPGx9iqRZqouLicjWHmXQkSEC4RjdV8Ohprkm8tuLAa4mR/mS8y8cHAEY+8As4gMlUEdwz+RwKbjSch9oBjH2BqNsJ3bSELAATC4caAVPMW103/VQ/MdjUSPK4Pz3yBVNsEUynvWWu71TaIUrfgZr3rFlmnz2s4vXEy58tFecNkbyRSeCtM01QkODMawBWLz+pcBUmK/mxTXF0HIhWEeIUM4b4Arg86yScboOTBxIEynxoN6FfweoiXTEXWbnWOICQaSonPW8CIr15IwR8Wmvhgff+tZbtOFJwMKX+f5QhAyu2eerY/4IcIvLTwne+afhhAK8FDy5E8thTh4ZzDloU8wYbRBUoKAp5bbK0EtyXyTJvdUgFxWld5KFJ8pkV4Ok64YnFZnW+yUgAoAYl4JOCn1kEyqZEAngC3QZPp632r6KLirfPNcY7AF6KxwizmQjzrFZzfTd10yY/SRNUYuNrn0kLWmiNwHQ59KW7GBOOtOO3POnSa6/zXPEdMlqVqZO05AgMY9umtVub5B9Fb20G6NrkDdkdL/y9Bk2Av6itMV4BzixEc2VH9XZzMR38llJf1m/Uae/3b8hNICftztdejQwAAAABJRU5ErkJggg==) no-repeat; }\n\n.ARK_ICON.ICON_NUM {\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAnZJREFUSA3tVjtok1EU/s5NalJDsa0PUHTwgXRQbAuCUESdfA26mEERjJaqg0Fj0NAuWaxVqaFRESsmoEPBDopD0ElRqi5GB5EaERE7GPERaQyJ+N/juSkJiSV1SLL1LOf+//3u95177rkPehZ/u50Jw8y8FDU0IpogRo/dkCvg8IbOtlgN+TH2MrETxMMYi49zLYlLuQy3BF9fmxX4b37tMyGkdOn42WiPBjaBKaeI7gz1Hrhnxvgv3FyU+235CVgBhYmGhjmhQf++j//ykVnprs42wU03b390UER8BHolvU0MXqlg26+bFo5iMvmOCAvA/AKEdQz6Y3e6VoV87u8Fphmr6PTA7XlCfkQ2TCzc5+loXYI1AH3QpE9R+stegJfJRuoO9x3cqAi7RajFyma6C+QFX7GKMjrbLqC5Ev0DAw56PFmZ5kMhWgvobeafanTdN7454Hkk4lmG7jLfpVZRwAZrvgFqwrfCANmRU22m1SDiiyf2/DB9QSItaUqJSH5MAW98RYFSUDXtigIWbPloFaMYlaRoqk2ckFSRLzTaYsSDLCcCo1nWpTjbQlBlZXosHHOoX8lDcki9d8L5PGOlM1I5WwUcNn08mdwilfNaJi65127OZUzfSGogulm8U9L2VHyZlc1Apb+2a81X2KJL5wLun6RwTSpph7c/Eqf05zcS4XLJ8/nWxTwi/pNmvuE9E3miGXelGFJ2h+t6Gbt8lAk0ki0hEUYFfNUAhwKek6ToqCzuuGTksSK1K9zruWUqSsGxnhmXRSgpkUeUQkfpHigKzR7XxVRUaJStQQVMVb/rL2Bu//wFXVWc0wcbzvzLot7Plr8avfRhA7RvpQAAAABJRU5ErkJggg==) no-repeat; }\n\n.ARK_ICON.ICON_NUM:hover, .ARK_ICON.ICON_NUM.active {\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAlxJREFUSA3tVktoE2EQ/mY3acSgtTUPsNmCRQRBoT14kqKe6uOgZ/GilNaKFzUm117TBAs+qK2oBw8efRyKnhQFT6IeRKQHH9ktGoPVKGpisjvOn3ZDIm4tJPXUvczs/8983+x88+8uhTPmXrYxBXAMLb3IIh1DPgVOhOF8onu6lfihtLWfbZ5CKJXlVgLXYylsrX5hOfwVgn921bdYBDNTNDM7BOadDC5prN/MJbvuqJxo+kPERjlOjB65tXyaPv4+vuHdn3iLahAdMzOO41ySMdsiif027NuRtHl40zkO2Fx+IuAnhDwq+0fLduVZ7KzZuWSCnsm5dgYdI6LpfMLoC4aNrXJe3rCDRKFkHhJgQyMM5pPd/TrRQQHu+FXB4JIJvha+90pbVoNwTyW9PUJFgO7L2jY42KPW/DruKjsS73pAQNEB71D39ZdnizQN61UgOfjkJjAt+ESbQcTmydhntTdKEkX4IiTVHDdeWU+C+qBmfE8CZ6FyOeu1qkTUeZ95RjQgY9zqUOSjLFGMdSJ27WndohoI1HREUtnjkUx2YG178DmBfkjigApWe/LG3S2iv5Dnrva+WOHq3kRmdpeAryKmxy6waxsIvpWsXge4yA6dfz3cWZA2T8pZ2BdOmU8LP82XzNgoIGPBkHFDNDClgCvhVPaRzXxLaRDw47IL7NoGgkBwzQxBuybjOaECcmeM0xq0ERnPVwLwUId+4GMydl1NlNbWtl1EvyBEORH3qs/v77NOGXMucM2uvK5rrfBwGjTwiGlq+X8QkKU+0E2V+ZfkeUz5s1ju35bf6GXjj9JSLtoAAAAASUVORK5CYII=) no-repeat; }\n\n.ARK_ICON.ICON_DEL {\n  position: absolute;\n  top: 11px;\n  right: 11px;\n  width: 8px;\n  height: 8px;\n  margin: 0;\n  padding: 0;\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAAXNSR0IArs4c6QAAAIxJREFUGBlNjjESwjAMBE8y/IfkD/SuQs0DGGjgC5mh4gcZSqjo+QPDf4htcsnII1Xn2/NJcuyHswS8b5f9F24O/b0BcqOE+Yfn6TpsjFNLzo8Q8BGaNBjSNTq+TbN1DtTQiBcKMAWjrVTCOhNE/bK4c8CtiLpC9DeJg53Vek9LwpbHGWQxdVHdpYT2D69xRVCaoaWHAAAAAElFTkSuQmCC) no-repeat; }\n\n.ARK_ICON.ICON_I {\n  position: absolute;\n  top: 9px;\n  left: 60px;\n  width: 15px;\n  height: 15px;\n  margin: 0;\n  padding: 0;\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAAXNSR0IArs4c6QAAAc5JREFUKBV9Uj1PG0EQ3dkjCidcpKBIqIESQYXgT6QgcpEIoQPRINlgCF+mth0+FL4qBDJGSCBZAlHxExBUQAmiJwgQFJjzAXeTeTbrnJDDSnczO++9ud03R+o/a3Rm/bP3bNV//ODfzI45f6rR6G1xMJ3rY+ZxVtwk2IM8EUXqgkhNL032roX5FfHI3Fb9k+flhNikiZJUax0sJLovh+Y3v3DR7+SAM6zUeYR0TybZc4smNabT85O3Id3vrNq61vnhqGvqaCD5TuJ3ft8vFlYLHKzI/htwjVc8nXOka6MI+8PCWCor5fJCHbjsWmLpjX9iud8EjhoWGlE4AidNk8RBAnUNVxVzM+4YJiJfnuqteGIw8JhUez6ftzTGIcDD690MpxTDxzZAicfsHl+4nzSpmmsBInDVEN6LY9PbDYrIbmu07/Xi1PcrOdsZxvGeyGBe4HVIfhiNRv2S29IpFTCnZRy2IVWLwDFvS6k54BVD4qnsrjR5fDsu0wRCzBmapaTzA/XylyWxrYiDwkuxcDKYyXUZDxCx993CqcBk67oB8LAqXy5v5Yf5lf2qfPWTiTpkhC7MIVZH4uzsQtLZM7yqYgNijhgHXIU5ph6OfwHgJr3gZ7nUAgAAAABJRU5ErkJggg==) no-repeat;\n  cursor: pointer; }\n\n.ARK_SCROLLBAR {\n  overflow-y: auto;\n  overflow-x: hidden; }\n\n.ARK_DROPDOWN {\n  width: 238px;\n  will-change: top, left;\n  display: none;\n  left: 68px;\n  top: 33px;\n  height: auto;\n  border-radius: 2px;\n  -webkit-box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.14);\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.14);\n  z-index: 500;\n  background: #fff;\n  position: absolute;\n  padding: 6px 0 !important;\n  max-height: 230px;\n  overflow-y: auto;\n  margin-inline-start: 0px;\n  margin-inline-end: 0px;\n  padding-inline-start: 40px; }\n\n.ARK_DROPDOWN.TOP {\n  top: -120px; }\n\n.ARK_DROPDOWN li {\n  position: relative;\n  cursor: pointer; }\n\n.ARK_DROPDOWN span:hover {\n  background: #f0f6fc; }\n\n.ARK_DROPDOWN span {\n  display: block;\n  height: 34px;\n  margin: 0 1px;\n  padding: 0 9px;\n  font-size: 14px;\n  line-height: 34px;\n  color: #4c6072;\n  background: #fff;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  -webkit-transition: background .2s;\n  transition: background .2s; }\n\n.ARK_DROPDOWN .selected span {\n  color: #1489e2; }\n\n.ARK_SCROLLBAR::-webkit-scrollbar {\n  width: 4px;\n  height: 4px; }\n\n.ARK_SCROLLBAR:hover::-webkit-scrollbar-thumb {\n  background: #e4eaf1; }\n\n.ARK_SCROLLBAR:hover::-webkit-scrollbar-thumb {\n  background: #e4eaf1;\n  min-width: 200px; }\n\n.ARK_SCROLLBAR::-webkit-scrollbar-thumb {\n  background: rgba(255, 255, 255, 0);\n  border-radius: 2px; }\n\n.ARK_SCROLLBAR::-webkit-scrollbar-thumb {\n  background: rgba(255, 255, 255, 0);\n  border-radius: 2px; }\n\n.ARK_SCROLLBAR ::-webkit-scrollbar-thumb {\n  background: rgba(255, 255, 255, 0);\n  border-radius: 2px;\n  -webkit-transition: background .2s ease-in-out;\n  transition: background .2s ease-in-out; }\n\n.ARKTOOLTIP {\n  padding: 8px 16px;\n  position: absolute;\n  z-index: 1070;\n  font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n  font-size: 12px;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 1.42857143;\n  text-align: left;\n  text-align: start;\n  text-decoration: none;\n  text-shadow: none;\n  text-transform: none;\n  letter-spacing: normal;\n  word-break: normal;\n  word-spacing: normal;\n  word-wrap: normal;\n  white-space: normal;\n  filter: alpha(opacity=0);\n  opacity: 1;\n  line-break: auto;\n  background: rgba(37, 45, 57, 0.95);\n  -webkit-box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.14);\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.14);\n  border-radius: 6px;\n  -moz-box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.14);\n  -webkit-box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.14);\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.14);\n  border: 1px solid #D8E0E9; }\n\n.ARKTOOLTIP .ARROW {\n  position: absolute;\n  width: 0;\n  height: 0;\n  border-color: transparent;\n  border-style: solid;\n  bottom: -5px;\n  left: 50%;\n  margin-top: -10px;\n  border-width: 5px 5px 0px;\n  border-top-color: rgba(37, 45, 57, 0.95);\n  /* right: 0; */\n  margin-left: -5px; }\n\n.ARKTOOLTIP .ARROW.ARKTOP {\n  border-width: 5px 5px 0px;\n  border-top-color: rgba(37, 45, 57, 0.95); }\n\n.ARKTOOLTIP .ARROW.ARKRIGHT {\n  left: 1px;\n  bottom: unset;\n  top: 38%;\n  margin-left: -5px;\n  border-top-color: unset;\n  border-right-color: rgba(37, 45, 57, 0.95);\n  border-width: 6px 4px 6px 0;\n  border-color: transparent rgba(37, 45, 57, 0.95) transparent transparent; }\n\n.ARKTOOLTIP .ARROW.ARKBOTTOM {\n  border-width: 0 5px 5px;\n  border-bottom-color: rgba(37, 45, 57, 0.95);\n  border-top-color: unset;\n  bottom: unset;\n  top: 5px; }\n\n.ARKTOOLTIP .WORDS {\n  max-width: 200px;\n  color: #ecf3f8;\n  text-align: center;\n  border-radius: 4px;\n  /* white-space: nowrap; */\n  line-height: 21px; }\n\n.ARK_FIXED_BOX {\n  display: none;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 1000;\n  background-color: rgba(255, 255, 255, 0.4); }\n";
  styleInject(css_248z);

  var ysMsg = '页面上每个可点击的位置都被视为元素，通过选择元素来圈定当前定义的事件生效范围，即点击哪些位置会上报定义的事件。<br>1 当前文本：指定内容，不区分元素类型，当文本发生变化时，埋点失效。<br>一般用于给某个特定内容文本埋点，<br>比如：<br>圈中按钮上的文字【登录】，当仅选择当前文本时，如果页面上有个非按钮的链接也叫【登录】，则在两处触发点击时，都会上报该事件。<br>2 当前位置：指定位置的元素，当内容发生变化时，埋点仍然有效，页面结构发生变化时，埋点失效。<br>一般用于给某个特定位置埋点。<br>3 同级元素：指与埋点元素的所有父级元素标签类型及元素个数相同的元素，一般用于给列表埋点，可以添加属性，区分同级别但不同内容的元素。<br>4 同类型元素：指与当前埋点元素的Class属性值相同或包含当前埋点元素的Class属性值的元素，点击相同类型的元素时会上报同一个事件，通常可以添加属性，区分同类型但不同内容的元素点击数据。<br>四个选项可以结合使用，<br>比如：<br>可选择当前位置+当前文本来给特定位置上的特定内容埋点<br>可选择当前文本+同类型元素来给相同控件相同名称的';
  var ymMsg = '可以选择埋点生效的页面：<br>1 当前页面：指仅在当前页面(URL) 点击相应元素才触发上报该事件<br>2 全部页面：指在所有接入SDK的页面中点击相应元素，都触发上报该事件。比如有非常多的商品详情页，每个页面上都有【加入购物车】按钮，即可选择全部页面，那在任何详情页上点击加入购物车，都会上报到同一个事件中，方便统计分析。';
  var eventHeader = '<div class="ARK_BOX_HEADER" id="ARK_BOX_HEADER">' + '<span class="ARK_TITLE" id="ARK_BOX_TITLE">{CHANGETEXT}</span>' + '<span class="ARK_BOX_CENTER ARK_BOX_SMALL">(可拖动)</span>' + '</div>';

  var eventIDBox = '<div class="ARK_EVENT"><span class="ARK_TITLE MID">定义事件</span>' + '<div class="ARK_BOX_EVENT_ID">' + '<span class="ARK_TITLE SM">事件ID</span>' + '<input id="ARK_BOX_EVENT_ID" type="text" placeholder="事件唯一标识，仅支持字母、数字和下划线" value="{EVENTID}" autocomplete="off">' + '<span class="ARK_BOX_EVENT_ID_ERROR" id="ARK_BOX_EVENT_ID_ERROR">仅支持字母、数字和下划线,且以字母开头</span>' + '</div>' + '<div class="ARK_BOX_EVENT_ID">' + '<span class="ARK_TITLE SM">事件名称</span>' + '<input id="ARK_BOX_EVENT_NAME" type="text" placeholder="事件显示名称，用于分析时方便查看" value="{EVENTNAME}" autocomplete="off">' + '<span class="ARK_BOX_EVENT_ID_ERROR" id="ARK_BOX_EVENT_NAME_ERROR">建议您命名不超过50个字符,便于阅读</span>' + '</div>' + '<span class="ARK_TITLE MID">事件属性</span>' + '</div>';

  var eventProItem = '<li class="ARK_PRO_ITEM">' + '<div class="ARK_BOX_EVENT_ID">' + '<span class="ARK_TITLE SM">属性ID</span>' + '<input class="PROID" type="text" placeholder="请输入..." value="{PRONAME}" autocomplete="off">' + '<ul class="ARK_SCROLLBAR ARK_DROPDOWN">' + '<li data-type="string" class="selected"><span>字符串</span></li>' + '<li data-type="number"><span>数值</span></li>' + '<li data-type="bool"><span>布尔值</span></li>' + '</ul>' + '<span class="ARK_BOX_EVENT_ID_ERROR">建议您命名不超过50个字符,便于阅读</span>' + '</div>' + '<div class="ARK_BOX_EVENT_ID fl">' + '<span class="ARK_TITLE SM fl mr-12">属性值</span>' + '<label class="v-radio-wrapper fl" for="ARK_BOX_PRO_ITEM">' + '<span class="v-radio-ARK {ISINPUTCLASS}">' + '<span class="v-radio-inner"></span> ' + '<input type="radio" class="v-radio-input" name="ARK_BOX_PRO_ITEM" id="ARK_PRO_INPUT">' + '</span>手动输入值' + '</label>' + '<label class="v-radio-wrapper fl" for="ARK_BOX_PRO_ITEM">' + '<span class="v-radio-ARK {ISPROELECLASS}">' + '<span class="v-radio-inner"></span> ' + '<input type="radio" class="v-radio-input" id="ARK_PRO_ELEMENT" name="ARK_BOX_PRO_ITEM">' + '</span>从页面选择' + '</label>' + '</div>' + '<div class="ARK_BOX_EVENT_ID fr textR">' + '<input class="PROVALUE fl" type="text" placeholder="请输入属性值" value="{PROVALUE}" autocomplete="off" {PROVALUEDISABLED} data-ark-value="{PROBASEVALUE}">' + '<span class="ARK_BOX_EVENT_ID_ERROR" id="ARK_BOX_EVENT_NAME_ERROR">建议您命名不超过50个字符,便于阅读</span>' + '<button class="ARK_ICON ICON_XQ fl  ml-8 "></button>' + '<button class="ARK_ICON ICON_REX fl {PROREXACTIVE}"></button>' + '</div>' + '<div class="ARK_BOX_EVENT_ID fr textR ">' + '<input class="PROREX fl" type="text" placeholder="输入正则表达式" value="{PROREXVALUE}" autocomplete="off">' + '<span class="ARK_BOX_EVENT_ID_ERROR" id="ARK_BOX_EVENT_NAME_ERROR">建议您命名不超过50个字符,便于阅读</span>' + '<button class="ARK_ICON ICON_NUM fl  ml-8 "></button>' + '</div>' + '<div class="ARK_BOX_EVENT_ID fl">' + '<span class="ARK_TITLE SM fl">数据类型</span>' + '<input class="PROTYPE" type="text" readonly="readonly" autocomplete="off" value="{PROTYPE}" autocomplete="off" data-type="{PROTYPEDATA}"/>' + '<ul class="ARK_SCROLLBAR ARK_DROPDOWN">' + '<li data-type="string"><span>字符串</span></li>' + '<li data-type="number"><span>数值</span></li>' + '<li data-type="bool"><span>布尔值</span></li>' + '</ul>' + '</div>' + '<button class="ARK_ICON ICON_DEL"></button>' + '<div class="ARK_FIXED_BOX"></div>';
  var eventPorListStart = '<div class="ARK_CONTENT ARK_SCROLLBAR">' + '<div  class="ARK_BOX_EVENT_ID">' + '<ul class="PROLIST ARK_SCROLLBAR" id="ARK_PRO_LIST">';

  var eventPorListEnd = '</ul>' + '<div  class="ARK_BOX_EVENT_ID">' + '<button class="ARK_ADD_PRO" id="ARK_ADD_PRO"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAAAAXNSR0IArs4c6QAAACtJREFUGBljYMACRDof/ccizMCETRCX2CBRzIjLM7jcjSGOy4BB4kGSnAEAOzgHjMbmwEkAAAAASUVORK5CYII="/>添加属性</button>' + '</div>' + '</div>';
  var eventPage = '<span class="ARK_TITLE MID">生效范围</span>' + '<div class="ARK_BOX_PAGE fl mb-15 pb-20">' + '<span class="ARK_TITLE SM fl mr-25">圈定元素</span><i class="ARK_ICON ICON_I" data-ark-tip="' + ysMsg + '" data-ark-tip-pos="{\'top\':\'-209px\',\'left\':\'81px\',\'pos\':\'right\'}"></i>' + '<div class="boxRadio">' + '<label class="v-radio-wrapper" for="ARK_PATH_ISPAGE">' + '<span class="v-radio-ARK {ISPATHPAGE}">' + '<span class="v-radio-inner"></span> ' + '<input type="checkbox" class="v-radio-input" name="ARK_PATH_ISPAGE" id="ARK_PATH_ISPAGE">' + '</span>当前位置' + '</label>' + '<label class="v-radio-wrapper" for="ARK_CONTENT_ISPAGE" title="{EVENTTEXTTITLE}">' + '<span class="v-radio-ARK {ISCONTENTPAGE}">' + '<span class="v-radio-inner"></span> ' + '<input type="checkbox" class="v-radio-input" name="ARK_CONTENT_ISPAGE" id="ARK_CONTENT_ISPAGE" >' + '</span>当前内容:{EVENTTEXT}' + '</label>' + '<label class="v-radio-wrapper" for="ARK_CLASS_ISPAGE">' + '<span class="v-radio-ARK {ISCLASSPAGE}">' + '<span class="v-radio-inner"></span> ' + '<input type="checkbox" class="v-radio-input" name="ARK_CLASS_ISPAGE" id="ARK_CLASS_ISPAGE">' + '</span>同类型元素' + '</label>' + '<label class="v-radio-wrapper" for="ARK_LIST_ISPAGE">' + '<span class="v-radio-ARK {ISLISTPAGE}">' + '<span class="v-radio-inner"></span> ' + '<input type="checkbox" class="v-radio-input" name="ARK_LIST_ISPAGE" id="ARK_LIST_ISPAGE">' + '</span>同级元素' + '</label>' + '</div>' + '<div class="ARK_BOX_EVENT_ID fl mb-40">' + '<span class="ARK_TITLE SM mr-12">生效页面</span><i class="ARK_ICON ICON_I" data-ark-tip="' + ymMsg + '" data-ark-tip-pos="{\'top\':\'-68px\',\'left\':\'81px\',\'pos\':\'right\'}"></i>' + '<input class="PAGETYPE" type="text" readonly="readonly" autocomplete="off" value="{PAGENAME}" autocomplete="off" id="ARK_BOX_ISPAGE" data-type="{PAGENAMETYPE}"/>' + '<ul class="ARK_DROPDOWN" >' + '<li data-type="isPage"><span>当前页面</span></li>' + '<li data-type="isAll"><span>全部页面</span></li>' + '</ul>' + '</div>' + '</div>' + '</div>' + '</div>';

  var eventSaveBox = '<div class="ARK_BOX_EVENT_ID ARK_BOX_SAVE fl">' + '<button id="ARK_BOX_CANCEL">取消</button>' + '<button id="ARK_BOX_SAVE">确认</button>' + '</div>';

  function setEventTemp(config) {
    if (!config) {
      config = {};
    }
    var text = config.content && config.content.length > 10 ? config.content.substring(0, 10) + '...' : config.content;
    var relateds = config.related || [];
    var properties = config.properties || [];
    var bindings = config.props_binding || [];
    var proTemp = '';
    var isList = false;
    if (config.new_path && config.newPath && JSON.stringify(config.new_path).indexOf('"row"') < 0 && JSON.stringify(config.newPath).indexOf('"row"') > -1) {
      isList = true;
    }
    if (relateds.length > 0) {
      for (var i = 0; i < relateds.length; i++) {
        var type = relateds[i].properties[0].prop_type;
        var typeName = '字符串';
        if (type === 'bool') {
          typeName = '布尔值';
        } else if (type === 'number') {
          typeName = '数值';
        }
        var value = relateds[i].properties[0].value;
        var regex = relateds[i].properties[0].regex;
        if (regex) {
          try {
            regex = Util$1.decode(regex);
            var _regex = new RegExp(regex);
            var regexVal = _regex.exec(value);
            if (regexVal && regexVal.length > 0) {
              value = regexVal[0];
            }
          } catch (e) {}
          relateds[i].properties[0].regex = regex;
        }
        proTemp += eventProItem.replace('{PRONAME}', relateds[i].properties[0].key).replace('{PROVALUE}', value || '--').replace('{PROVALUEDISABLED}', 'disabled').replace('{ISPROELECLASS}', 'v-radio-checked').replace('{PROREXACTIVE}', relateds[i].properties[0].regex ? 'active' : '').replace('{PROREXVALUE}', relateds[i].properties[0].regex || '').replace('{PROBASEVALUE}', relateds[i].properties[0].value).replace('{PROTYPE}', typeName).replace('{PROTYPEDATA}', type);
      }
    }
    if (properties.length > 0) {
      for (var y = 0; y < properties.length; y++) {
        var proType = properties[y].prop_type;
        var proTypeName = '字符串';
        if (proType === 'bool') {
          proTypeName = '布尔值';
        } else if (proType === 'number') {
          proTypeName = '数值';
        }
        proTemp += eventProItem.replace('{PRONAME}', properties[y].key).replace('{PROVALUE}', properties[y].value || '').replace('{ISINPUTCLASS}', 'v-radio-checked').replace('{PROVALUEDISABLED}', '').replace('{ISPROELECLASS}', '').replace('{PROTYPE}', proTypeName).replace('{PROTYPEDATA}', proType).replace('{PROREXVALUE}', '').replace('{PROBASEVALUE}', '');
      }
    }

    var eventTemp = eventHeader + eventIDBox + eventPorListStart + proTemp + eventPorListEnd + eventPage + eventSaveBox;
    var temp = eventTemp.replace('{CHANGETEXT}', config.isChange ? '编辑事件' : '创建事件').replace('{EVENTID}', config.appEventId || '').replace(/{EVENTNAME}/g, config.appEventName || '').replace('{PAGENAME}', config.isAll === 1 ? '全部页面' : '当前页面').replace('{PAGENAMETYPE}', config.isAll === 1 ? 'isAll' : 'isPage').replace(/{EVENTTEXT}/g, text || '').replace(/{EVENTTEXTTITLE}/, config.content || '').replace('{ISPATHPAGE}', config.new_path ? 'v-radio-checked' : '');
    for (var z = 0; z < bindings.length; z++) {
      var binding = bindings[z];
      if (binding.prop_name === 'class') {
        temp = temp.replace('{ISCLASSPAGE}', 'v-radio-checked');
      } else if (binding.prop_name === 'text') {
        temp = temp.replace('{ISCONTENTPAGE}', 'v-radio-checked');
      }
    }
    temp = temp.replace(/{ISCLASSPAGE}/g, '').replace(/{ISCONTENTPAGE}/g, '').replace(/{ISLISTPAGE}/g, isList === true ? 'v-radio-checked' : '');
    return temp;
  }

  function setProItemTemp() {
    var proTemp = eventProItem.replace('{PRONAME}', '').replace('{PROVALUE}', '').replace('{ISINPUTCLASS}', 'v-radio-checked').replace('{PROVALUEDISABLED}', '').replace('{PROTYPE}', '字符串').replace('{PROTYPEDATA}', 'string').replace('{PROREXVALUE}', '').replace('{PROBASEVALUE}', '');
    return proTemp;
  }

  var $lib_version = '5.0.0';

  var debugTemp = '<div id="ARK_DEBUG_BOX" class="debugLog" style="top:{TOP}px;left:{LEFT}px;position:fixed;">' + '<div class="bg"></div>' + '<div class="l-list">{LOGLIST}</div>' + '<img class="cha" id="ARK_DEBUG_CHA" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDcwM0Y3NzQ3MzJEMTFFODhFNDFEQjRCQTQ3NDU1ODYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDcwM0Y3NzU3MzJEMTFFODhFNDFEQjRCQTQ3NDU1ODYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NTlBNDc3RjcyQzgxMUU4OEU0MURCNEJBNDc0NTU4NiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1NTlBNDc4MDcyQzgxMUU4OEU0MURCNEJBNDc0NTU4NiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PtVAdZIAAACKSURBVHjadI/dDcMwCIRxxD5Jn6N0gqRdpMvlZ4NUeU08ETkqkJDlIh3G5jPikoh8iOgLXVSPFhoapB2aoO4P9IYORsr2+LLTJ3c2YIVOtkeFkzU8tN4U0guHxhUAipBGU+yUQi2xESc+oBFaws7iHrgC5fDZDWY2SPeaC8gN/iYr2Feg0uDzFmAA00Ef4tAWMJcAAAAASUVORK5CYII="/>' + '</div>';

  function setDebugTemp(config) {
    if (!config) return;

    var list = '';
    for (var i = 0; i < config.list.length; i++) {
      list += '<div>' + config.list[i].title + ':' + config.list[i].val + '<br></div>';
    }
    var temp = debugTemp.replace('{TOP}', config.top).replace('{LEFT}', config.left).replace('{LOGLIST}', list);
    return temp;
  }

  function MoveBox() {
    var _this = this;
    this.ele = null;
    this.parent = null;
    this.parentOption = {
      x: 0,
      y: 0
    };
    this.touchOption = {
      x: 0,
      y: 0
    };

    function down(event) {
      event.preventDefault();
      var touch;
      if (event.touches) {
        touch = event.touches[0];
      } else {
        touch = event;
      }

      _this.touchOption = {
        x: touch.clientX,
        y: touch.clientY
      };
      _this.parentOption = {
        x: _this.parent.offsetLeft,
        y: _this.parent.offsetTop
      };
      Util$1.addEvent(document, 'touchmove', function () {
        event.preventDefault();
      }, false);
      Util$1.addEvent(document, 'mousemove', move, false);
      Util$1.addEvent(document, 'mouseup', end, false);

      Util$1.addEvent(document, 'touchmove', move, false);
      Util$1.addEvent(document, 'touchend', end, false);
    }

    function move(event) {
      var touch;
      if (event.touches) {
        touch = event.touches[0];
      } else {
        touch = event;
      }
      var x = _this.parentOption.x + touch.clientX - _this.touchOption.x;
      var y = _this.parentOption.y + touch.clientY - _this.touchOption.y;

      _this.parent.style.left = x + 'px';
      _this.parent.style.top = y + 'px';
      // _this.parentOption = {
      //     x: x,
      //     y: y
      // }
    }

    function end(event) {
      Util$1.removeEvent(document, 'touchmove', function () {
        event.preventDefault();
      }, false);

      Util$1.removeEvent(document, 'touchmove', move, false);
      Util$1.removeEvent(document, 'touchend', end, false);

      Util$1.removeEvent(document, 'mousemove', move, false);
      Util$1.removeEvent(document, 'mouseup', end, false);
    }
    this.init = function (ele) {
      this.ele = ele;
      this.parent = this.ele.parentNode;

      Util$1.addEvent(_this.ele, 'mousedown', down, false);
      Util$1.addEvent(_this.ele, 'touchstart', down, false);
    };

    this.remove = function () {
      if (!this.ele) return;
      Util$1.removeEvent(document, 'mousedown', down, false);
      Util$1.removeEvent(document, 'touchstart', down, false);
    };
  }
  var moveBox = new MoveBox();

  /**
   * 添加关联元素属性及样式
   */
  function addProEleBox() {
    var step = 0;
    var proPath = Util$1.arrayMerge([], proEleObj.newPath);
    var clickPath = Util$1.arrayMerge([], clickOpenEle.newPath);
    clickPath = clickPath.reverse();
    proPath = proPath.reverse();

    var status = true;
    while (step < clickPath.length && status === true) {
      if (!clickPath[step] || !proPath[step]) {
        status = false;
      } else {
        for (var item in clickPath[step]) {
          if (clickPath[step][item] !== proPath[step][item]) {
            status = false;
          }
        }
      }

      if (status === false) {
        break;
      }
      step++;
    }
    if (step > 0) {
      proPath.splice(0, step - 1);
    }
    if (step === 0) {
      proPath[0] = clickPath[0];
    }
    var num = clickOpenEle.newPath.length - step;
    var proRelated = {
      target: {
        h5_path: proPath.reverse(),
        step: num
      }
    };
    proEle.setAttribute('data-ark-related', JSON.stringify(proRelated));
    var value = getElementContent(proEleObj.ele, true);
    proEle.value = value || '--';
    if (value) {
      proEle.setAttribute('data-ark-value', value);
    }
    var activeIcon = proEle.parentNode.getElementsByClassName('ICON_XQ');
    if (activeIcon.length > 0) {
      activeIcon = activeIcon[0];
      activeIcon.className = activeIcon.className.replace(/ active/g, '');
    }
    var hoverEles = document.getElementsByClassName('ARK_SAVE_DISPOSE');
    for (var i = 0; i < hoverEles.length; i++) {
      hoverEles[i].style.display = 'block';
    }

    var proDiv = setOnceBox(proEleObj.ele, '', 'ARK_SAVE_PRO');
    proEleObj.ele.parentNode.appendChild(proDiv);

    var showPro = document.getElementById('ARK_PRO');
    if (showPro) {
      var showProParent = showPro.parentNode || document.body;
      showProParent.removeChild(showPro);
    }
    isAddPro = false;
  }
  var clickOpenEle = null;
  var relatedLength = 0;

  function openVisualBox() {
    relatedLength = 0;
    if (!clickEleObj.ele) return;
    clickOpenEle = Util$1.toDeep(clickEleObj);
    var ele = clickOpenEle.ele;

    // var eleParent = ele.parentNode || document.body
    delClickBox();

    // checkChildrenEvent(ele)
    var tagName = ele.tagName;
    var hash = window.location.hash;
    if (hash.indexOf('?') > -1) {
      hash = hash.split('?')[0];
    }
    var config = {
      id: 0,
      url: window.location.protocol + '//' + window.location.host + window.location.pathname + hash,
      tagName: tagName,
      appEventId: '',
      appEventName: '',
      isAll: 0,
      allVersion: 0,
      dispose: 0,
      isText: '',
      link: clickOpenEle.path,
      index: clickOpenEle.index,
      content: getElementContent(ele),
      classes: Util$1.paramType(ele.className) === 'String' ? ele.className : '',
      isChange: false,
      related: [],
      properties: [],
      props_binding: []
    };
    var eventAttri = ele.getAttribute('data-ark-attr');
    if (eventAttri) {
      eventAttri = JSON.parse(eventAttri);
      config = Util$1.objMerge(config, eventAttri);
      config.isChange = true;
      config.new_path = eventAttri.new_path;
      config.related = eventAttri.related || [];
      config.props_binding = eventAttri.props_binding || [];
      config.properties = eventAttri.properties || [];
      for (var y = 0; y < config.props_binding.length; y++) {
        if (config.props_binding[y].prop_name === 'class') {
          config.classes = config.props_binding[y].value;
        }
      }
    }
    config.newPath = Util$1.arrayMerge([], clickOpenEle.newPath);
    clickDiv = setOnceBox(ele, 'ARK_SAVE_CLICK', 'ARK_SAVE_CLICK');
    clickDiv.innerHTML = '<span class="ARK_IS_EDIT">编辑中</span>';
    var parentEle = ele.parentNode || document.body;
    parentEle.appendChild(clickDiv);

    var relateds = config.related || [];
    relatedLength = relateds.length;
    setElementRelatedsDisable();
    if (relateds.length > 0) {
      for (var i = 0; i < relateds.length; i++) {
        var eRelated = relateds[i].target;
        eRelated.newPath = eRelated.h5_path;
        if (eRelated.h5_path) {
          var relatedPath = backH5PathProPath(config.newPath, eRelated);
          var relatedEele = parseNewPath(relatedPath, eRelated.step, clickEleObj.ele);
          if (relatedEele) {
            var value = relatedEele ? getElementContent(relatedEele, true) : '';
            relateds[i].properties[0].value = value;
            var id = config.id + 'pro' + i;
            var proDiv = setOnceBox(relatedEele, id, 'ARK_SAVE_PRO');
            relatedEele.parentNode.appendChild(proDiv);
          }
        }
      }
    }
    config.url = window.location.protocol + '//' + window.location.host + window.location.pathname + hash;
    var clickBoxTemp = setEventTemp(config);
    var clickDiv = document.createElement('div');
    clickDiv.className = 'ARK_BOX';
    clickDiv.id = 'ARK_BOX';
    clickDiv.innerHTML = clickBoxTemp;
    if (boxOption.left !== null && boxOption.top !== null) {
      clickDiv.style.left = boxOption.left;
      clickDiv.style.top = boxOption.top;
    }
    document.body.appendChild(clickDiv);

    initClickBoxActive(clickDiv, config);
    sendMsg({
      type: 'pointList',
      close: true
    });
  }

  function isTextAndIsAllEleClick(e) {
    var ele = (e || window.event).target;
    var parentEle = ele.parentNode;
    var eleChecked = ele.getAttribute('checked');
    if (eleChecked !== 'checked') {
      parentEle.className += ' v-radio-checked';
      ele.setAttribute('checked', 'checked');
    } else {
      parentEle.className = parentEle.className ? parentEle.className.replace(/ v-radio-checked/g, '') : '';
      ele.removeAttribute('checked');
    }
  }

  function inputOnblur(e) {
    var ele = e.target || e.srcElement;
    var nextEle = ele.nextSibling;
    var value = ele.value || '';
    var eleId = ele.id;

    var status = true;
    if (eleId === 'ARK_BOX_EVENT_ID') {
      // to do
      // status = checkPrivate(value, '$track', true)
      if (!/^[a-zA-Z$][a-zA-Z0-9_]{1,99}$|^[a-zA-Z]$/.test(value)) {
        status = false;
      }
    } else {
      if (value && value.length > 50) {
        status = false;
      }
    }

    if (!status) {
      ele.className += ' error';
      nextEle.style.display = 'block';
    }
  }

  function inputOnfocus(e) {
    var ele = e.target || e.srcElement;
    var nextEle = ele.nextSibling;
    ele.className = ele.className ? ele.className.replace(/ error/g, '') : '';
    nextEle.style.display = 'none';
  }

  function addProItem() {
    var proItemTemp = setProItemTemp();
    var proDiv = document.createElement('div');
    proDiv.innerHTML = proItemTemp;
    var proItem = proDiv.childNodes[0];
    var proListEls = document.getElementById('ARK_PRO_LIST');
    proListEls.appendChild(proItem);
    proListEls.scrollTop = proListEls.scrollHeight;
    setRelatedsActive(proItem, {});
    setElementRelatedsDisable();
  }
  function getChildEle(ele, className) {
    var chileEles = ele.childNodes;
    var eleChild = null;
    for (var i = 0; i < chileEles.length; i++) {
      if (chileEles[i].nodeType === 1) {
        if (Util$1.paramType(chileEles[i].className) === 'String' && chileEles[i].className.split(' ').indexOf(className) > -1) {
          // eleList.push(chileEles[i])
          eleChild = chileEles[i];
        }
        if (!eleChild && chileEles[i].childNodes.length > 0) {
          eleChild = getChildEle(chileEles[i], className);
        }
      }
    }
    return eleChild;
  }
  var isAddPro = false;
  var proEle = null;
  function setRelatedsActive(ele, related) {
    var clickEles = ele.getElementsByClassName('v-radio-wrapper');
    var inputKey = getChildEle(ele, 'PROID');
    var inputValue = getChildEle(ele, 'PROVALUE');
    var inputRegex = getChildEle(ele, 'PROREX');
    var inputType = getChildEle(ele, 'PROTYPE');
    var iconXQ = getChildEle(ele, 'ICON_XQ');
    var iconREX = getChildEle(ele, 'ICON_REX');
    var iconNUM = getChildEle(ele, 'ICON_NUM');
    var iconDel = getChildEle(ele, 'ICON_DEL');
    inputValue.setAttribute('data-ark-related', JSON.stringify(related));

    for (var i = 0; i < clickEles.length; i++) {
      var spanRadio = getChildEle(clickEles[i], 'v-radio-ARK');
      var checkedInput = getChildEle(clickEles[i], 'v-radio-input');

      if (spanRadio.className.indexOf('v-radio-checked') > -1 && i === 0) {
        checkedInput.setAttribute('checked', 'checked');
        inputValue.className += ' width246';
        inputRegex.style.display = 'none';
        iconXQ.style.display = 'none';
        iconREX.style.display = 'none';
        iconNUM.style.display = 'none';
        iconXQ.className = iconXQ.className.replace(/ active/g, '');
        iconREX.className = iconREX.className.replace(/ active/g, '');
        iconNUM.className = iconNUM.className.replace(/ active/g, '');
        inputValue.removeAttribute('disabled');
        inputValue.removeAttribute('data-ark-related');
        inputValue.removeAttribute('data-ark-value');
      } else if (spanRadio.className.indexOf('v-radio-checked') > -1 && i === 1) {
        checkedInput.setAttribute('checked', 'checked');
        inputValue.setAttribute('disabled', 'disabled');
        iconXQ.style.display = 'block';
        iconREX.style.display = 'block';
        if (inputRegex.value === '') {
          iconREX.className = iconREX.className.replace(/ active/g, '');
        }
        inputValue.className = inputValue.className.replace(/ width246/g, '');
        if (!related.properties[0].regex || related.properties[0].regex === '') {
          inputRegex.style.display = 'none';
          iconNUM.style.display = 'none';
        }
      }
    }
    Util$1.addEvent(inputKey, 'input', setProInputChange);

    Util$1.addEvent(inputRegex, 'input', function () {
      var initValue = inputValue.getAttribute('data-ark-value');

      var rexegValue = inputRegex.value;
      try {
        var value = initValue || inputValue.value;
        if (!value) return;
        if (!rexegValue) {
          inputValue.value = value;
          return;
        }
        var _regex = new RegExp(rexegValue);

        var regexVal = _regex.exec(value);
        if (regexVal && regexVal.length > 0) {
          inputValue.value = regexVal[0];
        } else {
          inputValue.value = value;
        }
      } catch (e) {
        inputValue.value = value;
      }
    });

    function isAddProActive() {
      isAddPro = true;
      iconXQ.className += ' active';
      proEle = inputValue;
      var relateAttr = inputValue.getAttribute('data-ark-related');
      var isElementRelate = false;
      if (inputValue.getAttribute('checked') === 'checked') {
        isElementRelate = true;
      }
      if (relateAttr) {
        var eRelated = JSON.parse(relateAttr).target;
        if (eRelated.h5_path) {
          var relatedPath = backH5PathProPath(Util$1.arrayMerge([], clickOpenEle.newPath), eRelated);
          var relatedEele = parseNewPath(relatedPath, eRelated.step, clickEleObj.ele);
          if (relatedEele) {
            var relateEle = getChildEle(relatedEele.parentNode, 'ARK_SAVE_PRO');

            relateEle && relateEle.parentNode.removeChild(relateEle);
            // relateds['ele'] = proDiv
            // document.body.appendChild(proDiv)
          }
        }
        isElementRelate = true;
      }
      return isElementRelate;
    }
    function notAddProActive() {
      isAddPro = false;
      var iconXQList = document.getElementsByClassName('ICON_XQ');
      for (var i = 0; i < iconXQList.length; i++) {
        iconXQList[i].className = iconXQList[i].className.replace(/ active/g, '');
      }
      proEle = null;
    }
    Util$1.addEvent(iconXQ, 'click', function () {
      if (isAddPro === true) {
        notAddProActive();
      } else {
        isAddProActive();
      }
    });
    Util$1.addEvent(iconREX, 'click', function () {
      notAddProActive();
      if (iconNUM.style.display !== 'none') {
        iconNUM.style.display = 'none';
        inputRegex.style.display = 'none';
        iconREX.className = iconREX.className.replace(/ active/g, '');
      } else {
        iconNUM.style.display = 'block';
        inputRegex.style.display = 'block';
        iconREX.className += ' active';
      }

      inputRegex.value = '';
    });
    Util$1.addEvent(iconNUM, 'click', function () {
      notAddProActive();
      var initValue = inputValue.getAttribute('data-ark-value');

      var rexegValue = '[\\d.]+';
      inputRegex.value = rexegValue;
      try {
        var value = initValue || inputValue.value;
        var _regex = new RegExp(rexegValue);
        var regexVal = _regex.exec(value);
        if (regexVal.length > 0) {
          inputValue.value = regexVal[0];
        }
      } catch (e) {}
    });
    for (var y = 0; y < clickEles.length; y++) {

      Util$1.addEvent(clickEles[y], 'click', function (index) {
        return function () {

          var ele = clickEles[index];
          var checkInput = getChildEle(ele, 'v-radio-input');
          var checkSpan = getChildEle(ele, 'v-radio-ARK');
          if (checkSpan.className.indexOf('v-radio-checked') < 0 && checkInput.disabled !== true) {
            checkSpan.className += ' v-radio-checked';
            checkInput.setAttribute('checked', 'checked');
            var elementEle = ele.nextSibling;

            if (checkInput.id === 'ARK_PRO_ELEMENT') {
              isAddProActive();
              elementEle = ele.previousSibling;
              inputValue.setAttribute('placeholder', '--');
              inputValue.setAttribute('disabled', 'disabled');
              inputValue.value = '';
              inputRegex.value = '';
              iconXQ.style.display = 'block';
              iconREX.style.display = 'block';
              iconREX.className = iconREX.className.replace(/ active/g, '');
              inputValue.className = inputValue.className.replace(/ width246/g, '');
              relatedLength++;
            } else {
              notAddProActive();
              inputValue.setAttribute('placeholder', '请输入属性值');
              inputValue.value = '';
              inputRegex.value = '';
              inputValue.className += ' width246';
              inputRegex.style.display = 'none';
              iconXQ.style.display = 'none';
              iconREX.style.display = 'none';
              iconNUM.style.display = 'none';
              iconXQ.className.replace(/ active/g, '');
              iconREX.className.replace(/ active/g, '');
              iconNUM.className.replace(/ active/g, '');
              inputValue.removeAttribute('disabled');
              var relateAttr = inputValue.getAttribute('data-ark-related');
              if (relateAttr) {
                var eRelated = JSON.parse(relateAttr).target;
                if (eRelated.h5_path) {
                  var relatedPath = backH5PathProPath(Util$1.arrayMerge([], clickOpenEle.newPath), eRelated);
                  var relatedEele = parseNewPath(relatedPath, eRelated.step, clickEleObj.ele);
                  if (relatedEele) {
                    var relateEle = getChildEle(relatedEele.parentNode, 'ARK_SAVE_PRO');

                    relateEle && relateEle.parentNode.removeChild(relateEle);
                    // relateds['ele'] = proDiv
                    // document.body.appendChild(proDiv)
                  }
                }
              }
              inputValue.removeAttribute('data-ark-related');
              inputValue.removeAttribute('data-ark-value');
              relatedLength--;
            }
            var elementInput = getChildEle(elementEle, 'v-radio-input');
            var elementSpan = getChildEle(elementEle, 'v-radio-ARK');
            elementSpan.className = checkSpan.className.replace(/ v-radio-checked/g, '');
            elementInput.removeAttribute('checked');
            setElementRelatedsDisable();
          }
        };
      }(y));
    }

    Util$1.addEvent(iconDel, 'click', function () {
      var isElementR = isAddProActive();
      if (isElementR === true) {
        relatedLength--;
      }
      isAddPro = false;
      ele.parentNode.removeChild(ele);
      setElementRelatedsDisable();
    });
    Util$1.addEvent(inputType, 'click', function () {

      var proTypeList = inputType.nextSibling;
      proTypeList.className = proTypeList.className.replace(/ TOP/g, '');
      var isType = inputType.getAttribute('data-type');
      if (!ele.nextSibling) {
        proTypeList.className += ' TOP';
      }

      proTypeList.style.display = 'block';
      var liEles = proTypeList.childNodes;
      for (var i = 0; i < liEles.length; i++) {
        var type = liEles[i].getAttribute('data-type');
        liEles[i].className = liEles[i].className.replace(/selected/g, '');
        if (isType === type) {
          liEles[i].className += 'selected';
        }
        liEles[i].onclick = function (ele) {
          return function () {
            var type = ele.getAttribute('data-type');
            for (var y = 0; y < liEles.length; y++) {
              liEles[y].className = liEles[y].className.replace(/selected/g, '');
            }
            inputType.value = ele.innerText;
            ele.className += 'selected';
            inputType.setAttribute('data-type', type);
            proTypeList.style.display = 'none';
          };
        }(liEles[i]);
      }
    });
  }
  function setElementRelatedsDisable() {
    var isDisable = false;
    if (relatedLength >= 5) {
      isDisable = true;
    }
    var ulEle = document.getElementById('ARK_PRO_LIST');
    if (!ulEle) {
      return;
    }
    var liEles = ulEle.getElementsByClassName('ARK_PRO_ITEM');
    for (var i = 0; i < liEles.length; i++) {
      var inputEles = liEles[i].getElementsByClassName('v-radio-input');
      var valueEle = inputEles[0];
      var elementEle = inputEles[1];
      if (valueEle.getAttribute('checked') === 'checked') {
        var pathParentEle = elementEle.parentNode.parentNode;
        if (isDisable) {
          if (pathParentEle.className.indexOf(' v-radio-wrapper-disabled') < 0) {
            pathParentEle.className += ' v-radio-wrapper-disabled';
            elementEle.setAttribute('disabled', 'disabled');
            pathParentEle.setAttribute('data-ark-tip', '关联元素个数达到上限，最多可关联5个元素！');
            pathParentEle.setAttribute('data-ark-tip-pos', JSON.stringify({ left: '45px' }));
          }
        } else {
          pathParentEle.className = pathParentEle.className.replace(/ v-radio-wrapper-disabled/g, '');
          elementEle.removeAttribute('disabled', 'disabled');
          pathParentEle.removeAttribute('data-ark-tip');
        }
      }
    }
  }
  var showProInputList = [];
  function backProInputList(obj) {
    var num = null;
    for (var i = 0; i < showProInputList.length; i++) {
      if (obj.id === showProInputList[i].id) {
        showProInputList[i].callback(obj);
        num = 1;
      }
    }
    showProInputList.splice(num, 1);
  }
  function setProInputChange(e) {
    var inputValue = (e || window.event).target;
    var value = inputValue.value;
    var ulEle = inputValue.nextSibling;
    var parentEle = inputValue.parentNode.parentNode;
    var proTypeEle = parentEle.getElementsByClassName('PROTYPE')[0];
    // proTypeEle.setAttribute('data-type', 'string')
    proTypeEle.removeAttribute('disabled');
    // proTypeEle.value = '字符串'
    ulEle.innerHTML = '';
    ulEle.style.display = 'none';
    ulEle.style.maxHeight = '130px';
    if (value === '') {
      return;
    }

    var callback = function (msg) {
      var data = msg.data;
      if (data.length > 0) {
        for (var i = 0; i < data.length; i++) {
          var liEles = document.createElement('li');
          liEles.innerHTML = '<span>' + data[i].code + '</span>';
          ulEle.appendChild(liEles);
          liEles.onclick = function (data) {
            return function () {
              var type = data.dataType;
              var name = '字符串';

              inputValue.value = data.code;
              ulEle.style.display = 'none';
              if (type === 'boolean') {
                type = 'bool';
                name = '布尔值';
              } else if (type === 'number') {
                name = '数值';
              }
              proTypeEle.value = name;
              proTypeEle.setAttribute('data-type', type);
              proTypeEle.setAttribute('disabled', 'disabled');
            };
          }(data[i]);
        }
        ulEle.style.display = 'block';
      }
    };
    var id = +new Date();
    showProInputList.push({
      id: id,
      callback: callback
    });
    // callback({ data: [{ code: '234' }, { code: '344' }, { code: '1222' }] })
    sendMsg({
      code: 200,
      type: 'pro_like',
      id: id,
      key: inputValue.value
    });
  }
  function changeBindings(config) {
    clearDisposeEles();
    var newEvent = [{
      newPath: config.new_path ? Util$1.arrayMerge([], config.new_path) : null,
      bindings: Util$1.arrayMerge([], config.props_binding)
    }];
    var eles = parserPageEvents(newEvent);
    for (var y = 0; y < eles.length; y++) {
      if (clickOpenEle.ele !== eles[y].ele) {
        setShowDoms(eles[y].ele);
      }
      // setVisualEvent(eles[y].ele, eles[y].config, y)
    }
  }
  function initClickBoxActive(ele, config) {
    var saveEle = document.getElementById('ARK_BOX_SAVE');
    var cancelEle = document.getElementById('ARK_BOX_CANCEL');
    var isTextEle = document.getElementById('ARK_CONTENT_ISPAGE');
    var isClassEle = document.getElementById('ARK_CLASS_ISPAGE');
    var isPathEle = document.getElementById('ARK_PATH_ISPAGE');
    var isListEle = document.getElementById('ARK_LIST_ISPAGE');
    var isPageEle = document.getElementById('ARK_BOX_ISPAGE');
    var eventIDEle = document.getElementById('ARK_BOX_EVENT_ID');
    var eventIdErrorEle = document.getElementById('ARK_BOX_EVENT_ID_ERROR');
    var eventNameEle = document.getElementById('ARK_BOX_EVENT_NAME');
    var eventNameErrorEle = document.getElementById('ARK_BOX_EVENT_NAME_ERROR');
    var headMove = document.getElementById('ARK_BOX_HEADER');
    var addProEle = document.getElementById('ARK_ADD_PRO');

    if (config.dispose !== 0) {
      eventIDEle.setAttribute('disabled', 'disabled');
      eventIDEle.setAttribute('data-ark-tip', '已部署埋点不可修改事件ID');
      eventIDEle.setAttribute('data-ark-tip-pos', JSON.stringify({ left: '120px', pos: 'bottom' }));
    }
    if (tooltipObj.newVision !== true) {
      var msg = '此功能要求方舟平台版本在5.1及以上';
      addProEle.setAttribute('disabled', 'disabled');
      addProEle.parentNode.setAttribute('data-ark-tip', msg);
      addProEle.parentNode.setAttribute('data-ark-tip-pos', JSON.stringify({ left: '70px' }));
      document.getElementById('ARK_PRO_LIST').setAttribute('data-ark-tip', msg);
      document.getElementById('ARK_PRO_LIST').setAttribute('data-ark-tip-pos', JSON.stringify({ left: '70px' }));

      var list = [isPathEle, isListEle, isClassEle];
      for (var i = 0; i < list.length; i++) {
        var pathParentEle = list[i].parentNode.parentNode;
        pathParentEle.className += ' v-radio-wrapper-disabled';
        pathParentEle.setAttribute('disabled', 'disabled');
        list[i].setAttribute('disabled', 'disabled');
      }
    }
    addProEle.onclick = addProItem;
    var relatedsEles = document.getElementsByClassName('ARK_PRO_ITEM');
    for (var z = 0; z < relatedsEles.length; z++) {
      if (tooltipObj.newVision !== true) {
        var hoverBox = getChildEle(relatedsEles[z], 'ARK_FIXED_BOX');
        hoverBox.style.display = 'block';
      }
      (function (relatedEle, conf) {
        setRelatedsActive(relatedEle, conf);
      })(relatedsEles[z], config.related[z]);
    }

    if (config.content === '') {
      isTextEle.parentNode.parentNode.style.display = 'none';
    }
    if (config.classes === '') {
      isClassEle.parentNode.parentNode.style.display = 'none';
    }
    if (config.newPath && JSON.stringify(config.newPath).indexOf('"row"') < 0) {
      isListEle.parentNode.parentNode.style.display = 'none';
    }
    var pageUlEle = isPageEle.nextSibling;

    Util$1.addEvent(isPageEle, 'click', function () {
      pageUlEle.style.display = 'block';
      pageUlEle.style.left = '80px';
    });
    var isPageType = isPageEle.getAttribute('data-type');
    for (var y = 0; y < pageUlEle.childNodes.length; y++) {
      var pageLi = pageUlEle.childNodes[y];
      pageLi.className = (Util$1.paramType(pageLi.className) === 'String' ? pageLi.className : '').replace(/selected/g, '');
      var type = pageLi.getAttribute('data-type');
      if (isPageType === type) {
        pageLi.className += 'selected';
      }
      Util$1.addEvent(pageLi, 'click', function (ele) {
        return function () {
          for (var z = 0; z < pageUlEle.childNodes.length; z++) {
            var liEle = pageUlEle.childNodes[z];
            liEle.className = (Util$1.paramType(liEle.className) === 'String' ? liEle.className : '').replace(/selected/g, '');
          }
          var type = ele.getAttribute('data-type');
          isPageEle.value = ele.innerText;
          ele.className += 'selected';
          isPageEle.setAttribute('data-type', type);
          pageUlEle.style.display = 'none';
        };
      }(pageLi));
    }
    for (var c = 0; c < config.props_binding.length; c++) {
      var binding = config.props_binding[c];
      if (binding.prop_name === 'class') {
        isClassEle.setAttribute('checked', 'checked');
      } else if (binding.prop_name === 'text') {
        isTextEle.setAttribute('checked', 'checked');
      }
    }
    if (config.new_path) {
      isPathEle.setAttribute('checked', 'checked');
    }
    if (config.new_path && config.newPath && JSON.stringify(config.new_path).indexOf('"row"') < 0 && JSON.stringify(config.newPath).indexOf('"row"') > -1) {
      isListEle.setAttribute('checked', 'checked');
    }
    function eventBingsActive(e) {
      if (e) {
        isTextAndIsAllEleClick(e);
      }
      var pathParentEle = isPathEle.parentNode.parentNode;
      if (isTextEle.getAttribute('checked') !== 'checked' && isClassEle.getAttribute('checked') !== 'checked' && isListEle.getAttribute('checked') !== 'checked' && isPathEle.getAttribute('checked') !== 'checked') {
        isTextAndIsAllEleClick({ target: isPathEle });
        config.new_path = config.newPath;
      }
      var bindings = [];
      if (isTextEle.getAttribute('checked') === 'checked') {
        bindings.push({
          "prop_name": "text",
          "prop_type": "string",
          "value": config.content
        });
      }
      if (isClassEle.getAttribute('checked') === 'checked') {
        bindings.push({
          "prop_name": "class",
          "prop_type": "string",
          "value": config.classes
        });
      }
      if (isListEle.getAttribute('checked') === 'checked') {
        config.new_path = delPathRow(config.newPath);
        if (isPathEle.getAttribute('checked') !== 'checked') {
          isTextAndIsAllEleClick({ target: isPathEle });
        }
        pathParentEle.className += ' v-radio-wrapper-disabled';
        pathParentEle.setAttribute('disabled', 'disabled');
        isPathEle.setAttribute('disabled', 'disabled');
      } else if (tooltipObj.newVision === true) {
        pathParentEle.className = pathParentEle.className.replace(/ v-radio-wrapper-disabled/g, '');
        pathParentEle.removeAttribute('disabled');
        isPathEle.removeAttribute('disabled');
        config.new_path = config.newPath;
      }
      if (isPathEle.getAttribute('checked') !== 'checked') {
        config.new_path = null;
      }
      config.props_binding = bindings;
      changeBindings(config);
    }
    eventBingsActive();
    Util$1.addEvent([isPathEle, isListEle, isClassEle, isTextEle], 'click', eventBingsActive);
    eventIDEle.focus();
    if (Util$1.paramType(eventIDEle.createTextRange) !== 'Undefined') {
      var rtextRange = eventIDEle.createTextRange();
      rtextRange.moveStart('character', eventIDEle.value.length);
      rtextRange.collapse(true);
      rtextRange.select();
    } else if (Util$1.paramType(eventIDEle.selectionStart) !== 'Undefined') {
      eventIDEle.selectionStart = eventIDEle.value.length;
    }
    eventNameEle.onblur = eventIDEle.onblur = inputOnblur;
    Util$1.addEvent([eventNameEle, eventIDEle], 'focus', inputOnfocus);
    // eventNameEle.onfocus = eventIDEle.onfocus = inputOnfocus
    saveEle.onclick = function () {
      inputOnblur({
        target: eventIDEle
      });
      if (eventIdErrorEle.style.display && eventIdErrorEle.style.display !== 'none' || eventNameErrorEle.style.display && eventNameErrorEle.style.display !== 'none') {
        return;
      }

      var eventName = eventNameEle.value || '';
      var eventID = eventIDEle.value || '';

      var relatedEles = document.getElementsByClassName('PROVALUE');
      var relatedTypeEles = document.getElementsByClassName('PROTYPE');
      var relatedKeyEles = document.getElementsByClassName('PROID');
      var relatedRegexEles = document.getElementsByClassName('PROREX');
      var relateds = [];
      var properties = [];
      for (var i = 0; i < relatedEles.length; i++) {
        var relatedEle = relatedEles[i];
        var typeEle = relatedTypeEles[i];
        var relatedKeyEle = relatedKeyEles[i];
        var relatedRegexEle = relatedRegexEles[i];
        var related = relatedEle.getAttribute('data-ark-related');
        var relatedType = typeEle.getAttribute('data-type');
        var relatedValue = relatedEle.value;
        var relatedKey = relatedKeyEle.value;
        var relatedTegex = relatedRegexEle.value;
        if (related && relatedKey !== '') {
          related = JSON.parse(related);
          related['properties'] = [{
            key: relatedKey,
            prop_name: 'text',
            prop_type: relatedType
          }];
          if (relatedTegex !== '') {
            related['properties'][0]['regex'] = Util$1.encode(relatedTegex);
          }

          delete related['target']['path'];
          delete related['target']['newPath'];
          relateds.push(related);
        } else if (relatedValue !== '' && relatedKey !== '') {
          properties.push({
            key: relatedKey,
            prop_name: 'text',
            prop_type: relatedType,
            value: relatedValue
          });
        }
      }
      config.related = relateds;
      config.properties = properties;

      // var isAll = isPageEle.getAttribute('checked') === 'checked' ? 0 : 1
      // var isText = isTextEle.getAttribute('checked') === 'checked' ? 1 : 0
      var isAll = isPageEle.getAttribute('data-type') === 'isAll' ? 1 : 0;
      var isText = isTextEle.getAttribute('checked') === 'checked' ? 1 : 0;
      config = Util$1.objMerge(config, {
        appEventId: eventID,
        appEventName: eventName,
        isAll: isAll,
        isText: isText === 1 ? config.content : ''
      });

      var isChange = config.isChange;
      delete config.content;
      delete config.isChange;
      delete config.newPath;
      delete config.classes;
      delete config.bindings;
      var obj = {
        type: isChange ? 'change_update' : 'change_request',
        payload: {
          path: [config]
        }
      };
      sendMsg(obj);
      delClickBox();
    };
    cancelEle.onclick = function () {
      delClickBox();
      showVisualEvent(visualEvetnList);
    };
    moveBox.init(headMove);
  }
  function clearDisposeEles() {
    var className = 'ARK_SHOW_DISPOSE';
    var hasSetEles = document.getElementsByClassName(className);
    // var delEles = []
    while (hasSetEles.length > 0) {
      var eventID = hasSetEles[0].getAttribute('data-ark-attr');
      if (eventID) {
        hasSetEles[0].className = hasSetEles[0].className.replace(/ ARK_SHOW_DISPOSE/g, '');
      } else {
        var parentEls = hasSetEles[0].parentNode || document.body;
        parentEls.removeChild(hasSetEles[0]);
      }
    }
  }
  var boxOption = {
    top: null,
    left: null
  };
  function delClickBox() {
    clearDisposeEles();
    clearShowDoms('ARK_SAVE_PRO');
    clearShowDoms('ARK_PRO_ELE');
    clearShowDoms('debugLog');

    var clickBoxElement = document.getElementById('ARK_BOX');
    if (clickBoxElement) {
      boxOption.left = clickBoxElement.style.left;
      boxOption.top = clickBoxElement.style.top;
      var boxParent = clickBoxElement.parentNode || document.body;
      boxParent.removeChild(clickBoxElement);
    }
    var isEditEle = document.getElementById('ARK_IS_CLICK');
    if (isEditEle) {
      var editParent = isEditEle.parentNode || document.body;
      editParent.removeChild(isEditEle);
    }
    var isBox = document.getElementById('ARK_SAVE_CLICK');
    if (isBox) {
      var isBoxParent = isBox.parentNode || document.body;
      isBoxParent.removeChild(isBox);
    }
  }

  function clearShowDoms(className) {
    var hasSetEles = document.getElementsByClassName(className);
    while (hasSetEles.length > 0) {
      var parentEls = hasSetEles[0].parentNode || document.body;
      parentEls.removeChild(hasSetEles[0]);
    }

    isAddPro = false;
  }
  function setShowDoms(ele) {
    var eventID = ele.getAttribute('data-ark-id');
    var eventEle = document.getElementById(eventID);
    if (eventEle) {
      eventEle.className += ' ARK_SHOW_DISPOSE';
    } else {
      var eleParent = ele.parentNode || document.body;
      var diposeDiv = setOnceBox(ele, '', 'ARK_SHOW_DISPOSE');
      eleParent.appendChild(diposeDiv);
    }
  }
  function setVisualEvent(ele, config, isOpen) {

    ele.setAttribute('data-ark-attr', JSON.stringify(config));
    var eventPostion = setBoxPostion(ele);
    var width = eventPostion.width;
    var height = eventPostion.height;
    if (!width || !height) {
      return;
    }

    if (Util$1.paramType(ele.className) === 'String' && ele.className.indexOf('ARK_') > -1) {
      ele.className = ele.className.replace(/ ARK_NO_LIGHT/g, '');
      return;
    }
    var eventEleId = ele.getAttribute('data-ark-id');
    var disposeDiv = null;
    if (eventEleId) {
      disposeDiv = document.getElementById(eventEleId);
    }
    if (!disposeDiv) {
      eventEleId = +new Date() + '' + Math.floor(Math.random() * 1000000);
      ele.setAttribute('data-ark-id', eventEleId);
      var eleParent = ele.parentNode || document.body;
      disposeDiv = setOnceBox(ele, '', 'ARK_SAVE_DISPOSE');
      eleParent.appendChild(disposeDiv);
      // clearShowDoms('ARK_SAVE_DISPOSE')
      // Util.addEvent(disposeDiv, 'click', (function (ele) {
      //   return function (event) {
      //     event.stopPropagation()
      //     setEleMessage(ele)
      //     openVisualBox(disposeDiv)
      //     return false
      //   }
      // })(ele))
    } else {
      disposeDiv.style.left = eventPostion.x + 'px';
      disposeDiv.style.top = eventPostion.y + 'px';
      disposeDiv.style.width = eventPostion.width + 'px';
      disposeDiv.style.height = eventPostion.height + 'px';
    }
    disposeDiv.setAttribute('data-ark-attr', JSON.stringify(config));
    disposeDiv.id = eventEleId;

    if (isOpen) {
      setEleMessage(ele);
      openVisualBox();
    }
  }

  function removeVisualEvent(ele) {
    delClickBox();
    ele.removeAttribute('data-ark-attr');
    var eventID = ele.getAttribute('data-ark-id');
    if (eventID) {
      ele.removeAttribute('data-ark-id');
      ele.removeAttribute('data-ark-attr');
      var hoverEle = document.getElementById('ARK_CLICK');
      if (hoverEle) {
        var parentEle = hoverEle.parentNode || document.body;
        parentEle.removeChild(hoverEle);
      }
      var eventEle = document.getElementById(eventID);
      if (eventEle) {
        var eventParentEle = eventEle.parentNode || document.body;
        eventParentEle.removeChild(eventEle);
      }
    }
  }
  var elePath = null;
  var patt = /\d{13}/g;

  // function checkChildrenEvent (ele) {
  //   var eleAttr = ele.getAttribute('data-ark-attr')

  //   if (!eleAttr && visualEvetnList.length > 0) {
  //     showVisualEvent(visualEvetnList)
  //   }

  // }
  function offset(curEle) {
    var totalLeft = null,
        totalTop = null,
        par = curEle;
    var eleTable = null;
    //首先加自己本身的左偏移和上偏移
    // totalLeft += curEle.offsetLeft;
    // totalTop += curEle.offsetTop
    //只要没有找到body，我们就把父级参照物的边框和偏移也进行累加
    while (par) {
      if (par.tagName === 'TABLE') {
        eleTable = par;
      }
      if (navigator.userAgent.indexOf("MSIE 8.0") === -1) {
        //累加父级参照物的边框
        totalLeft += par.clientLeft;
        totalTop += par.clientTop;
      }
      //累加父级参照物本身的偏移
      totalLeft += par.offsetLeft;
      totalTop += par.offsetTop;
      par = par.offsetParent;
    }

    return {
      left: totalLeft,
      top: totalTop,
      eleTable: eleTable
    };
  }
  var moveX = 0;
  var moveY = 0;
  var hiddenEle = [];
  function mouseMoveEvent(e) {

    var ele = e.target || e.srcElement;
    if (ele.id && (ele.id === 'ARK_PRO' || ele.id === 'ARK_SAVE_CLICK') || Util$1.paramType(ele.className) === 'String' && (ele.className.indexOf('ARK_SAVE_DISPOSE') > -1 || ele.className === 'ARK_SAVE_PRO') || ele.className === 'ARK_SHOW_DISPOSE') {
      ele.style.display = 'none';

      hiddenEle.push(ele);
      return true;
    }
    if (isParent(ele, document.getElementById('ARK_SAVE_CLICK'))) {
      document.getElementById('ARK_SAVE_CLICK').style.display = 'none';
      hiddenEle.push(document.getElementById('ARK_SAVE_CLICK'));
      return true;
    }
    var tagName = ele.tagName;

    if (isParent(ele, document.getElementById('ARK_BOX')) || isParent(ele, document.getElementById('ARK_DEBUG_BOX')) || ['html', 'body', 'hr', 'br', 'canvas', 'svg', 'use'].indexOf(tagName.toLowerCase()) > -1) {
      var clickEle = document.getElementById('ARK_CLICK');
      if (clickEle) {
        var parentClickEle = clickEle.parentNode || document.body;
        parentClickEle.removeChild(clickEle);
      }
      return true;
    }
    var moveEle = isAddPro === true ? proEleObj.ele : clickEleObj.ele;
    eleDiv = isAddPro === true ? document.getElementById('ARK_PRO') : document.getElementById('ARK_CLICK');
    if (eleDiv && (Math.abs(e.clientX - moveX) > 2 || Math.abs(e.clientY - moveY) > 2)) {
      // if (eleDiv) {
      eleDiv.style.display = 'none';
    }

    if (ele !== eleDiv && moveEle !== ele) {
      var eleParent = ele.parentNode || document.body;
      // var eleParent = document.body
      moveEle = ele;
      setEleMessage(ele);
      if (debugModel !== true) {
        if (eleDiv) {
          var parentEle = eleDiv.parentNode || document.body;
          // var parentEle = document.body
          parentEle.removeChild(eleDiv);
        }
        var eleDivTemp = isAddPro === true ? setOnceBox(moveEle, 'ARK_PRO', 'ARK_PRO_ELE') : setOnceBox(moveEle, 'ARK_CLICK', 'ARK_CLICK_ELE');
        eleParent.appendChild(eleDivTemp);
      }
      checkPoints();
    }

    clearTimeout(timer);
    timer = null;
    timer = setTimeout(function () {
      if (!eleDiv) return;
      eleDiv.style.display = 'block';
    }, 20);
  }
  function mouseOutEvent(e) {
    var ele = (e || window.event).target;
    // if (ele.id && (ele.id === 'ARK_IS_CLICK'||)) {
    //   return
    // }
    if (ele.id && ele.id === 'ARK_PRO' || Util$1.paramType(ele.className) === 'String' && ele.className.indexOf('ARK_') > -1) {
      return;
    }
    // var proEles = document.getElementsByClassName('ARK_SAVE_PRO')
    for (var i = 0; i < hiddenEle.length; i++) {
      hiddenEle[i].style.display = 'block';
    }
    // var disposeEle = document.getElementsByClassName('ARK_SAVE_DISPOSE')
    // for (var y = 0; y < disposeEle.length; y++) {
    //   disposeEle[y].style.display = 'block'
    // }
    hiddenEle = [];
  }

  Util$1.addEvent(document, 'click', function (event) {
    var ele = (event || window.evnet).target;
    var ulELes = document.getElementsByClassName('ARK_DROPDOWN');
    for (var i = 0; i < ulELes.length; i++) {
      ulELes[i].style.display = 'none';
    }
    if (highlightStatus === false || isParent(ele, document.getElementById('ARK_BOX'))) {
      return true;
    }
    if (debugModel === true) {
      if (isParent(ele, document.getElementById('ARK_DEBUG_BOX')) === false) {
        event.stopPropagation();
        event.preventDefault();
        delDebugBox();
        sendDebugMsg();
        return false;
      }
      return true;
    }
    delDebugBox();
    if (isAddPro === true && proEleObj.ele) {
      event.stopPropagation();
      event.preventDefault();
      addProEleBox();
      return false;
    }
    if (isParent(ele, document.getElementById('ARK_BOX')) === false) {
      event.stopPropagation();
      event.preventDefault();
      delClickBox();
      openVisualBox();
      return false;
    }
    // if (isAddPro === true) {
    //   Util.addEvent(eleDivTemp, 'click', function () {
    //     event.stopPropagation()
    //     addProEleBox()
    //     return false
    //   })
    // } else if (debugModel === false) {
    //   Util.addEvent(eleDivTemp, 'click', function (event) {

    //   }, true)
    // }
  }, true);

  function setBoxPostion(ele) {
    var eleOffsetParent = ele.offsetParent || document.body;
    var mouseElePosition = offset(ele);
    var parentPostion = offset(eleOffsetParent);
    var y = mouseElePosition.top - parentPostion.top;
    var x = mouseElePosition.left - parentPostion.left;
    if (mouseElePosition.eleTable !== null) {
      parentPostion = offset(mouseElePosition.eleTable.offsetParent);
      x = mouseElePosition.left - parentPostion.left;
      y = mouseElePosition.top - parentPostion.top;
    }
    var width = ele.offsetWidth;
    var height = ele.offsetHeight;
    return {
      x: x - 1.5,
      y: y - 1.5,
      width: width,
      height: height
    };
  }
  function setOnceBox(ele, id, className) {
    var boxDiv = document.createElement('div');
    boxDiv.id = id;
    boxDiv.className = className;
    var eventPostion = setBoxPostion(ele);
    boxDiv.style.top = eventPostion.y + 'px';
    boxDiv.style.left = eventPostion.x + 'px';
    boxDiv.style.width = eventPostion.width + 'px';
    boxDiv.style.height = eventPostion.height + 'px';
    return boxDiv;
  }

  var eleDiv = null;
  var timer = null;
  var clickEleObj = {};
  var proEleObj = {};
  function setEleMessage(ele) {
    var pathObj = domParentList(ele);
    var path = pathObj.path;
    var index = setIndex(ele, pathObj.path);
    if (isAddPro === true) {
      proEleObj = {
        index: index,
        elePath: elePath,
        path: path,
        newPath: pathObj.newPath,
        ele: ele
      };
    } else {
      clickEleObj = {
        index: index,
        elePath: elePath,
        path: path,
        newPath: pathObj.newPath,
        ele: ele
      };
    }
  }

  function addVisualListener() {
    delClickBox();
    Util$1.addEvent(document, 'mousemove', mouseMoveEvent, true);
    Util$1.addEvent(document, 'mouseout', mouseOutEvent, true);
    // Util.addEvent(document, 'mouseover', showEleHover, true)
    var hoverEles = document.getElementsByClassName('ARK_SAVE_DISPOSE');
    for (var i = 0; i < hoverEles.length; i++) {
      hoverEles[i].className = hoverEles[i].className.replace(' ARK_NO_LIGHT', '');
    }
  }
  function delEvents() {
    var hoverEle = document.getElementById('ARK_CLICK');
    if (hoverEle) {
      var parentEle = hoverEle.parentNode || document.body;
      parentEle.removeChild(hoverEle);
    }
    var hoverEles = document.getElementsByClassName('ARK_SAVE_DISPOSE');
    while (hoverEles.length > 0) {
      var hoverParentEle = hoverEles[0].parentNode || document.body;
      hoverParentEle.removeChild(hoverEles[0]);
    }
    var eventDivs = Util$1.selectorAllEleList('[data-ark-id]');
    for (var i = 0; i < eventDivs.length; i++) {
      eventDivs[i].removeAttribute('data-ark-id');
      eventDivs[i].removeAttribute('data-ark-attr');
    }
  }
  function removeVisualListener() {
    delClickBox();
    // Util.removeEvent(document, 'mouseover', showEleHover, true)
    Util$1.removeEvent(document, 'mousemove', mouseMoveEvent, true);
    var hoverEle = document.getElementById('ARK_CLICK');
    if (hoverEle) {
      var parentEle = hoverEle.parentNode || document.body;
      parentEle.removeChild(hoverEle);
    }
    var hoverEles = document.getElementsByClassName('ARK_SAVE_DISPOSE');
    for (var i = 0; i < hoverEles.length; i++) {
      hoverEles[i].className += ' ARK_NO_LIGHT';
    }
  }
  var visualEvetnList = [];
  function checkPoints() {
    var ele = clickEleObj.ele;
    var pageEvents = visualEvetnList;
    var childrenList = ele.childNodes || [];
    for (var i = 0; i < childrenList.length; i++) {
      for (var y = 0; y < pageEvents.length; y++) {
        var eventEleObj = pageEvents[y];
        if (checkNewPathBase(clickEleObj.newPath, eventEleObj.newPath) == true && pathContrast(clickEleObj, eventEleObj, true) === true) {
          setVisualEvent(ele, eventEleObj);
        }
      }
    }
  }
  function showVisualEvent(list) {
    delEvents();
    var localList = [];
    var hash = window.location.hash;
    if (hash.indexOf('?') > -1) {
      hash = hash.split('?')[0];
    }
    var url = window.location.protocol + '//' + window.location.host + window.location.pathname + hash;
    var newEvent = [];
    for (var i = 0; i < list.length; i++) {
      list[i]['inPage'] = false;
      if (url === list[i].url || list[i].isAll === 1) {

        var eleShowPath = list[i].link;
        var newPath = list[i].new_path;
        var bindings = list[i].props_binding;
        // var related = list[i].related
        if (!newPath && !bindings) {
          var index = list[i].index;
          if (patt.test(eleShowPath) === true) {
            eleShowPath = eleShowPath.replace(patt, '');
          }
          var ele = parseEvent(eleShowPath)[index];
          if (ele) {
            setVisualEvent(ele, list[i]);
            list[i]['inPage'] = true;
          }
        } else {
          list[i].newPath = newPath;
          newEvent.push(list[i]);
        }
        localList.push(list[i]);
      }
    }
    if (newEvent.length > 0) {
      var eles = parserPageEvents(newEvent);
      for (var y = 0; y < eles.length; y++) {
        setVisualEvent(eles[y].ele, eles[y].config);
      }
      for (var t = 0; t < list.length; t++) {
        for (var z = 0; z < newEvent.length; z++) {
          if (list[t].appEventId === newEvent[z].newEvent && list[t].inPage === false) {
            if (list[i].isAll === 1) {
              list[t].inPage = newEvent[z].inPage;
            }
          }
        }
      }
    }
    visualEvetnList = localList;

    return list;
  }

  function delVisualEvent(obj) {
    var newPath = obj.new_path;
    var bindings = obj.props_binding;
    var ele = null;
    var eles = [];
    if (!newPath && !bindings) {
      var eleShowPath = obj.link;
      var index = obj.index;
      ele = parseEvent(eleShowPath)[index];
    } else {
      eles = parserPageEvents([obj]);
    }
    if (ele) {
      removeVisualEvent(ele);
    }
    for (var i = 0; i < eles.length; i++) {
      removeVisualEvent(eles[i].ele);
    }
  }
  var highlightStatus = true;
  function hiddenVisualEvent(status) {
    delClickBox();
    // var eleList = Util.selectorAllEleList('[data-ark-attr]') // document.querySelectorAll('[data-ark-attr]')
    if (!status) {
      highlightStatus = false;
      removeVisualListener();
      // var hoverEles = document.getElementsByClassName('ARK_SAVE_DISPOSE')
      // for (var i = 0; i < hoverEles.length; i++) {
      //   hoverEles[i].className += ' ARK_NO_LIGHT'
      // }
    } else {
      highlightStatus = true;
      addVisualListener();
    }
    // for (var i = 0; i < eleList.length; i++) {
    //   var ele = eleList[i]
    //   if (status) {
    //     var eleAttr = ele.getAttribute('data-ark-attr')
    //     setVisualEvent(ele, JSON.parse(eleAttr))
    //   }
    // }
  }

  function openVisualEvent(obj) {
    var newPath = obj.new_path;
    var bindings = obj.props_binding;
    var ele = null;
    obj.isPage = true;
    if (!newPath && !bindings) {
      var eleShowPath = obj.link;
      var index = obj.index;
      ele = parseEvent(eleShowPath)[index];
    } else {
      var eles = parserPageEvents([obj]);
      if (eles.length > 0) {
        ele = eles[0].ele;
      }
    }
    if (ele) {
      setVisualEvent(ele, obj, true);
    }
  }
  var debugModel = false;
  function openDebugModule(status) {
    debugModel = status;
  }

  /**
   * 清除当前展示的debug框
   */
  function delDebugBox() {
    var ele = document.getElementById('ARK_DEBUG_BOX');
    if (ele) {
      var parent = ele.parentNode;
      parent.removeChild(ele);
    }
  }
  function openDebugEvent(obj) {
    var ele = clickEleObj.ele;
    var attrConfig = ele.getAttribute('data-ark-attr');
    attrConfig = JSON.parse(attrConfig);
    var relateds = attrConfig.related || [];
    var properties = attrConfig.properties || [];
    var elePosition = boxPosition(ele, 'debug');
    var config = {
      top: elePosition.top,
      left: elePosition.left,
      list: obj.event_info || [],
      newPath: domParentList(ele).newPath
    };
    if (relateds.length > 0) {
      for (var i = 0; i < relateds.length; i++) {
        var eRelated = Util$1.toDeep(relateds[i].target);
        eRelated['path'] = eRelated.h5_path;
        if (eRelated.h5_path) {
          var relatedPath = backH5PathProPath(config.newPath, eRelated);
          var relatedEele = parseNewPath(relatedPath, eRelated.step, clickEleObj.ele);
          if (relatedEele) {
            var value = relatedEele ? getElementContent(relatedEele, true) : '';
            if (value !== '') {
              var rxegx = relateds[i].properties[0].regex;
              if (rxegx) {
                try {
                  rxegx = Util$1.decode(rxegx);
                  // rexegValue = rexegValue.replace('\\', '\\\\')
                  var _regex = new RegExp(rxegx);
                  var regexVal = _regex.exec(value); //value.match(rexegValue)//
                  if (regexVal && regexVal.length > 0) {
                    value = regexVal[0];
                  }
                } catch (e) {}
              }
              config.list.push({
                title: relateds[i].properties[0].key,
                val: value
              });
            }
          }
        }
      }
    }
    for (var y = 0; y < properties.length; y++) {
      config.list.push({
        title: properties[y].key,
        val: properties[y].value
      });
    }

    var debugTemp = setDebugTemp(config);

    var debugDiv = document.createElement('div');
    debugDiv.innerHTML = debugTemp;
    document.body.appendChild(debugDiv.childNodes[0]);

    var cancelEle = document.getElementById('ARK_DEBUG_CHA');
    Util$1.addEvent(cancelEle, 'click', delDebugBox);
  }

  function sendDebugMsg() {

    var eventConfig = clickEleObj.ele.getAttribute('data-ark-attr');
    if (!eventConfig) return;
    var eventId = JSON.parse(eventConfig).appEventId;
    var hash = window.location.hash;
    if (hash.indexOf('?') > -1) {
      hash = hash.split('?')[0];
    }
    var url = window.location.protocol + '//' + window.location.host + window.location.pathname + hash;
    var config = {
      event_info: {
        $event_id: eventId,
        $lib_version: $lib_version,
        $screen_width: window.screen.width,
        $screen_height: window.screen.height
      },
      type: 'debug',
      target_page: url
    };
    sendMsg(config);
  }

  // 设置文字提示
  function delTipEle() {
    var ele = document.getElementById('ARKTOOLTIP');
    if (ele) {
      var parentEle = ele.parentNode || document.body;
      parentEle.removeChild(ele);
      tooltipObj.ele = null;
    }
  }
  var tooltipObj = {};
  var hiddenTipTimer = null;

  Util$1.addEvent(document, 'mouseover', function (e) {
    clearTimeout(hiddenTipTimer);
    var ele = (e || window.event).target;

    var attr = ele.getAttribute('data-ark-tip');
    var attrPostion = ele.getAttribute('data-ark-tip-pos') || {};
    if (Util$1.paramType(attrPostion) === 'String') {
      attrPostion = attrPostion.replace(/'/g, '"');
      attrPostion = JSON.parse(attrPostion);
    }
    if (attr) {
      tooltipObj.ele = ele;

      delTipEle();
      try {
        attr = JSON.parse(attr);
      } catch (e) {}
      var msg = '';
      var classPostion = 'ARKTOP';
      if (Util$1.paramType(attr) === 'String') {
        msg = attr;
      }
      if (Util$1.paramType(attr) === 'Object' || Util$1.paramType(attrPostion) === 'Object') {
        msg = attr.msg || msg;
        if (attr['pos'] === 'right' || attrPostion['pos'] === 'right') {
          classPostion = 'ARKRIGHT';
        }
        if (attr['pos'] === 'bottom' || attrPostion['pos'] === 'bottom') {
          classPostion = 'ARKBOTTOM';
        }
      }
      delTipEle();
      var tipDiv = setOnceBox(ele, 'ARKTOOLTIP', 'ARKTOOLTIP');
      if (classPostion === 'ARKBOTTOM') {
        tipDiv.style.bottom = '-44px';
        tipDiv.style.top = 'unset';
      } else {
        tipDiv.style.top = ele.offsetTop - 44 + 'px';
      }

      if (attrPostion['left']) {
        tipDiv.style.left = attrPostion['left'];
      }
      if (attrPostion['top']) {
        tipDiv.style.top = attrPostion['top'];
      }
      tipDiv.style.width = 'auto';
      tipDiv.style.height = 'auto';
      tipDiv.innerHTML = '<div div class="ARROW ' + classPostion + '" ></div ><span class="WORDS">' + msg + '</span>';
      ele.parentNode.appendChild(tipDiv);
    } else {
      hiddenTipTimer = setTimeout(function () {
        if (isParent(ele, tooltipObj.ele) === false && isParent(ele, document.getElementById('ARKTOOLTIP')) === false) {
          delTipEle();
        }
      }, 200);
    }
  });

  function setVisualStatus(status) {
    tooltipObj['newVision'] = status;
  }

  var isVisaulInit = true;
  var visualStatus = false;
  var highlightStatus$1 = true;

  /**
   * 监听服务端iframeMessage消息
   *
   * @param {JSON} msg 消息
   */
  function processMsg(msg) {
    if (!isVisaulInit) {
      return;
    }
    var eventList = [];
    var type = msg.type;
    // var url = window.location.protocol + '//' + window.location.host + window.location.pathname + window.location.hash
    switch (type) {
      case 'INIT':
        // 初始化验证
        if (msg.appid !== visualConfig.appkey) {
          sendMsg({
            code: 400,
            type: 'INIT',
            msg: 'appkey不相同'
          });
          isVisaulInit = false;
          return;
        }
        sendMsg({
          code: 200,
          type: 'INIT',
          isNewVisual: true
        });
        var obj = {
          type: 'checkUrl',
          code: 200,
          url: window.location.href,
          skip: true
        };
        sendMsg(obj);
        setVisualStatus(msg.isNewVisual || false);
        sendChangeUrl();
        break;
      case 'point_list':
        // 所有已埋点元素绑定debug模式

        eventList = msg.data || [];
        if (highlightStatus$1 === false) {
          return;
        }
        if (!isElmentReady() || document.readyState !== 'complete') {
          setTimeout(function () {
            processMsg(msg);
          }, 1000);
          return;
        } else {
          var pageList = showVisualEvent(eventList);
          sendMsg({
            type: 'check_points',
            list: pageList
          });
        }
        break;
      // case 'EVENT_URL':
      //   // 验证埋点元素是否为当前页元素

      //   var eventUrlObj = {
      //     type: 'checkUrl',
      //     code: 200,
      //     url: url,
      //     skip: msg.url === url
      //   }
      //   sendMsg(eventUrlObj)
      //   break
      case 'VISUAL':
        if (highlightStatus$1 === false) {
          visualStatus = msg.visual || false;
          return;
        }
        if (msg.visual === true) {
          // 开始初始化可视化埋点
          openDebugModule(false);
        } else if (msg.debugmode === true) {
          // 开始初始化debug模式
          openDebugModule(true);
        }
        if (highlightStatus$1 === true) {
          addVisualListener();
        }
        break;
      case 'change_update':
        if (highlightStatus$1 === false) {
          return;
        }
        if (msg.path && msg.path.length > 0) {
          // if (msg.path[0].url.charAt(msg.path[0].url.length - 1) === '/' && url.charAt(url.length - 1) !== '/') {
          //   url += '/'
          // }
          // if (url !== msg.path[0].url) {
          //   sendMsg({
          //     type: 'change_page',
          //     code: 200,
          //     msg: '跳转埋点页面',
          //     path: msg.path,
          //     url: url
          //   })
          // } else {
          openVisualEvent(msg.path[0]);
          // }
        }
        break;
      case 'change_delete':
        if (visualStatus === false) {
          openDebugModule(false);
        }

        if (msg.path && msg.path.length > 0) {
          delVisualEvent(msg.path[0]);
          sendMsg({
            code: 200,
            type: 'change_delete'
          });
        } else {
          sendMsg({
            code: 400,
            type: 'change_delete',
            msg: '删除失败'
          });
        }
        break;
      case 'add_success':
        sendMsg({
          code: 200,
          type: 'add_success',
          msg: '添加成功'
        });
        break;
      case 'success_update':
        if (msg.path && msg.path.length > 0) {
          showVisualEvent(msg.path);
        }
        break;
      case 'debug':
        // openDebugBox(msg)
        openDebugEvent(msg);
        break;
      case 'highlight':
        highlightStatus$1 = msg.highlight;
        // if (highlightStatus === true) {
        //   showVisualEvent(eventList)
        // }
        // if (visualStatus) {
        hiddenVisualEvent(highlightStatus$1);

        // } else {
        //   hiddenVisualEvent(highlightStatus)

        // }
        break;
      case 'like_pro':
        backProInputList(msg);
        break;
    }
  }
  /**
   * [initHeatmap description]初始化可视化并建立通讯
   * @return {[type]} [description]
   */
  function initVisual() {
    Util$1.changeHash(function () {
      highlightStatus$1 = true;
      visualStatus = true;
      delEvents();
      hiddenVisualEvent(true);
      sendChangeUrl();
    });
  }
  // }
  function sendChangeUrl() {
    // var url = window.location.protocol + '//' + window.location.host + window.location.pathname + window.location.hash
    sendMsg({
      type: 'change_page_now',
      code: 200,
      msg: '跳转埋点页面',
      url: window.location.href.replace('?visual=true&', '?').replace('?visual=true', '')
    });
  }

  initVisual();

  getMsg(msg => {
    processMsg(msg);
  });

  // window.AnalysysModule = Util.objMerge(window.AnalysysModule || {}, {
  //   visual: {
  //     init: initVisual,
  //     msg: processMsg,
  //     version: '4.5.1'
  //   }
  // })

}());
